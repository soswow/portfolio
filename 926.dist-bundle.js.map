{"version":3,"file":"926.dist-bundle.js","mappings":"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","sources":["webpack://website/./node_modules/@atlaskit/icon/glyph/lock-filled.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/utils/isValidPercentageUnit.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/utils/getElementDimension.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/actions.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/ui/tickBox/styled.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/ui/blanket/styled.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/utils/getErrorMessage.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/ui/actionsBar/styled.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/ui/playButton/styled.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/ui/common.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/ui/styled.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/ui/titleBox/styled.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/ui/imageRenderer/imageRenderer.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/utils/resizeModeToMediaImageProps.js","webpack://website/./node_modules/@atlaskit/media-ui/dist/esm/truncateText.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/ui/progressBar/styled.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/ui/titleBox/titleBox.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/ui/titleBox/failedTitleBox.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/ui/progressBar/progressBar.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/ui/playButton/playButton.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/ui/tickBox/tickBox.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/ui/actionsBar/actionsBar.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/ui/iconWrapper/styled.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/ui/iconMessage/styled.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/ui/iconMessage/index.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/cardView.js","webpack://website/./node_modules/react-lazily-render/dist/esnext/utils/getElementBounds.js","webpack://website/./node_modules/react-lazily-render/dist/esnext/utils/getViewportBounds.js","webpack://website/./node_modules/react-lazily-render/dist/esnext/utils/convertOffsetToBounds.js","webpack://website/./node_modules/react-lazily-render/dist/esnext/utils/isElementInViewport.js","webpack://website/./node_modules/react-lazily-render/dist/esnext/utils/eventListenerOptions.js","webpack://website/./node_modules/react-lazily-render/dist/esnext/index.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/utils/lazyContent/styled.js","webpack://website/./node_modules/react-lazily-render/dist/esnext/utils/isBackCompatMode.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/utils/lazyContent/index.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/utils/viewportDetector.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/utils/containsPixelUnit.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/utils/getDataURIDimension.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/utils/isRetina.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/utils/objectURLCache.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/card/getCardPreview/cache.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/utils/videoSnapshot.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/card/getCardPreview/helpers.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/utils/dimensionComparer.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/card/getCardPreview/filePreviewStatus.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/card/getCardPreview/index.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/utils/metadata.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/utils/document.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/card/cardState.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/card/index.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/card/cardAnalytics.js","webpack://website/./node_modules/@atlaskit/media-card/dist/esm/root/card/getCardStatus.js","webpack://website/./node_modules/scrollparent/scrollparent.js"],"sourcesContent":["\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = void 0;\n\nvar _react = _interopRequireDefault(require(\"react\"));\n\nvar _base = require(\"@atlaskit/icon/base\");\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nconst LockFilledIcon = props => /*#__PURE__*/_react.default.createElement(_base.Icon, Object.assign({\n  dangerouslySetGlyph: `<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" role=\"presentation\"><path fill=\"currentColor\" fill-rule=\"evenodd\" d=\"M8 10V8.002A4.004 4.004 0 0112 4a4 4 0 014 4.002V10a2 2 0 012 2v6c0 1.105-.902 2-2.009 2H8.01A2 2 0 016 18v-6c0-1.102.897-1.995 2-2zm2 0h4V8.002A2.001 2.001 0 0012 6c-1.102 0-2 .898-2 2.002V10zm2 7a2 2 0 100-4 2 2 0 000 4z\"/></svg>`\n}, props));\n\nLockFilledIcon.displayName = 'LockFilledIcon';\nvar _default = LockFilledIcon;\nexports.default = _default;","// Utility used to know if the integrator is using percentage values\nexport var isValidPercentageUnit = function isValidPercentageUnit(value) {\n  var valueString = \"\".concat(value);\n  return valueString[valueString.length - 1] === '%' && !isNaN(+valueString.slice(0, -1));\n};","export var getElementDimension = function getElementDimension(element, dimension) {\n  var dimensionValue = element.getBoundingClientRect()[dimension];\n  return Math.round(dimensionValue);\n};","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nexport function attachDetailsToActions(actions, details) {\n  return actions.map(function (action) {\n    return _objectSpread(_objectSpread({}, action), {}, {\n      handler: function handler() {\n        action.handler({\n          type: 'file',\n          details: details\n        });\n      }\n    });\n  });\n}","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport styled from 'styled-components';\nimport { transition } from '../../../styles';\nimport { B200, N0, N100 } from '@atlaskit/theme/colors';\nexport var tickBoxClassName = 'media-card-tickbox';\nexport var tickboxFixedStyles = \"\\n  background-color: \".concat(N0, \";\\n  color: \").concat(N100, \";\\n\");\n\nvar getSelectedStyles = function getSelectedStyles(selected) {\n  return selected ? \"\\n      background-color: \".concat(B200, \";\\n      color: white;\\n    \") : \"\";\n};\n\nexport var Wrapper = styled.div.attrs({\n  className: tickBoxClassName\n})(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n\"])), function (_ref) {\n  var selected = _ref.selected;\n  return \"\\n    \".concat(transition(), \"\\n    font-size: 14px;\\n    width: 14px;\\n    height: 14px;\\n    position: absolute;\\n    top: 7px;\\n    left: 7px;\\n    border-radius: 20px;\\n    color: transparent;\\n\\n    /* Enforce dimensions and position of \\\"tick\\\" icon */\\n    span {\\n      display: block;\\n      svg {\\n        height: 14px;\\n      }\\n    }\\n    \").concat(getSelectedStyles(selected), \"\\n  \");\n});\nWrapper.displayName = 'TickBoxWrapper';","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport styled from 'styled-components';\nimport { transition } from '../../../styles';\nimport { N90A } from '@atlaskit/theme/colors';\nexport var blanketClassName = 'media-card-blanket';\nexport var fixedBlanketStyles = \"\\n  background-color: \".concat(N90A, \";\\n\");\nexport var Blanket = styled.div.attrs({\n  className: blanketClassName\n})(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n\"])), function (_ref) {\n  var isFixed = _ref.isFixed;\n  return \"\\n    \".concat(transition(), \"\\n    position: absolute;\\n    width: 100%;\\n    height: 100%;\\n    max-height: 100%;\\n    max-width: 100%;\\n    left: 0;\\n    top: 0;\\n    \").concat(isFixed ? fixedBlanketStyles : '', \"\\n  \");\n});\nBlanket.displayName = 'Blanket';","import React from 'react';\nimport { FormattedMessage } from 'react-intl-next';\nimport { messages } from '@atlaskit/media-ui';\nexport var getErrorMessage = function getErrorMessage(status) {\n  return status === 'error' && /*#__PURE__*/React.createElement(FormattedMessage, messages.failed_to_load);\n};","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport styled from 'styled-components';\nimport { transition } from '../../../styles';\nexport var actionsBarClassName = 'media-card-actions-bar';\nexport var fixedActionBarStyles = \"\\n  opacity: 1;\\n\";\nexport var Wrapper = styled.div.attrs({\n  className: actionsBarClassName\n})(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n\"])), function (_ref) {\n  var isFixed = _ref.isFixed;\n  return \"\\n    \".concat(isFixed ? fixedActionBarStyles : 'opacity: 0;', \"\\n    \").concat(transition(), \"\\n    position: absolute;\\n    top: 8px;\\n    right: 8px;\\n    display: flex;\\n    flex-flow: row nowrap;\\n    align-items: center;\\n  \");\n});\nWrapper.displayName = 'ActionsBarWrapper';","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2;\n\nimport styled from 'styled-components';\nimport { N0, N90A } from '@atlaskit/theme/colors';\nexport var playButtonClassName = 'media-card-play-button';\nvar bkgClassName = 'play-icon-background';\nvar discSize = 48;\nvar discSizeHover = 56;\nexport var fixedPlayButtonStyles = \"\\n  .\".concat(bkgClassName, \" {\\n    width: \").concat(discSizeHover, \"px;\\n    height: \").concat(discSizeHover, \"px;\\n  }\\n\");\nexport var Wrapper = styled.div.attrs({\n  className: playButtonClassName\n})(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  top: 0;\\n  left: 0;\\n  width: 100%;\\n  height: 100%;\\n  display: flex;\\n  align-items: center;\\n  justify-content: center;\\n  color: \", \";\\n  span {\\n    position: absolute;\\n  }\\n\"])), N0);\nWrapper.displayName = 'PlayButtonWrapper';\nexport var Background = styled.div.attrs({\n  className: bkgClassName\n})(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  transition-property: width, height;\\n  transition-duration: 0.1s;\\n  position: absolute;\\n  width: \", \"px;\\n  height: \", \"px;\\n  background: \", \";\\n  border-radius: 100%;\\n\"])), discSize, discSize, N90A);\nBackground.displayName = 'PlayButtonBackground';","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nvar _responsiveSettings;\n\nexport var Breakpoint;\n\n(function (Breakpoint) {\n  Breakpoint[\"SMALL\"] = \"small\";\n  Breakpoint[\"LARGE\"] = \"large\";\n})(Breakpoint || (Breakpoint = {}));\n\nexport var responsiveSettings = (_responsiveSettings = {}, _defineProperty(_responsiveSettings, Breakpoint.SMALL, {\n  fontSize: 11,\n  lineHeight: 14,\n  titleBox: {\n    verticalPadding: 4,\n    horizontalPadding: 8\n  }\n}), _defineProperty(_responsiveSettings, Breakpoint.LARGE, {\n  fontSize: 14,\n  lineHeight: 22,\n  titleBox: {\n    verticalPadding: 8,\n    horizontalPadding: 12\n  }\n}), _responsiveSettings);\nexport var getTitleBoxHeight = function getTitleBoxHeight(breakpoint) {\n  return (responsiveSettings[breakpoint].lineHeight + responsiveSettings[breakpoint].titleBox.verticalPadding) * 2;\n};","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\nimport _slicedToArray from \"@babel/runtime/helpers/slicedToArray\";\n\nvar _templateObject, _templateObject2;\n\nimport styled from 'styled-components';\nimport { getCSSUnitValue } from '../../utils/getCSSUnitValue';\nimport { getDefaultCardDimensions } from '../../utils/cardDimensions';\nimport { fontFamily } from '@atlaskit/theme/constants';\nimport { borderRadius } from '@atlaskit/media-ui';\nimport { N20, N60A } from '@atlaskit/theme/colors';\nimport { akEditorSelectedBoxShadow } from '@atlaskit/editor-shared-styles/consts';\nimport { hideNativeBrowserTextSelectionStyles } from '@atlaskit/editor-shared-styles/selection';\nimport { transition } from '../../styles';\nimport { tickBoxClassName, tickboxFixedStyles } from './tickBox/styled';\nimport { fixedBlanketStyles, blanketClassName } from './blanket/styled';\nimport { fixedActionBarStyles, actionsBarClassName } from './actionsBar/styled';\nimport { fixedPlayButtonStyles, playButtonClassName } from './playButton/styled';\nimport { Breakpoint, responsiveSettings } from './common';\nvar breakpointSizes = [[Breakpoint.SMALL, 599], [Breakpoint.LARGE, Infinity]];\nexport var calcBreakpointSize = function calcBreakpointSize() {\n  var wrapperWidth = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n\n  var _ref = breakpointSizes.find(function (_ref3) {\n    var _ref4 = _slicedToArray(_ref3, 2),\n        _breakpoint = _ref4[0],\n        limit = _ref4[1];\n\n    return wrapperWidth <= limit;\n  }) || [Breakpoint.SMALL],\n      _ref2 = _slicedToArray(_ref, 1),\n      breakpoint = _ref2[0];\n\n  return breakpoint;\n};\n\nvar generateResponsiveStyles = function generateResponsiveStyles() {\n  var breakpoint = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Breakpoint.SMALL;\n  var setting = responsiveSettings[breakpoint];\n  return \"\\n    font-size: \".concat(setting.fontSize, \"px;\\n    line-height: \").concat(setting.lineHeight, \"px;\\n  \");\n};\n\nvar getWrapperDimensions = function getWrapperDimensions(dimensions, appearance) {\n  var _ref5 = dimensions || {},\n      width = _ref5.width,\n      height = _ref5.height;\n\n  var _getDefaultCardDimens = getDefaultCardDimensions(appearance),\n      defaultWidth = _getDefaultCardDimens.width,\n      defaultHeight = _getDefaultCardDimens.height;\n\n  return \"\\n    width: \".concat(getCSSUnitValue(width || defaultWidth), \";\\n    max-width: 100%;\\n    height: \").concat(getCSSUnitValue(height || defaultHeight), \";\\n    max-height: 100%;\\n  \");\n}; // This is a trick to simulate the blue border without affecting the dimensions.\n// CSS outline has no 'radius', therefore we can't achieve the same effect with it\n\n\nvar getWrapperShadow = function getWrapperShadow(disableOverlay, selected) {\n  var withOverlayShadow = !disableOverlay ? \"0 1px 1px \".concat(N60A, \", 0 0 1px 0 \").concat(N60A) : '';\n  var selectedShadow = selected ? akEditorSelectedBoxShadow : '';\n  var shadow = [selectedShadow, withOverlayShadow].filter(Boolean).join(', ');\n  return shadow ? \"box-shadow: \".concat(shadow, \";\") : '';\n};\n\nvar getCursorStyle = function getCursorStyle(shouldUsePointerCursor) {\n  return \"cursor: \".concat(shouldUsePointerCursor ? 'pointer' : 'default', \";\");\n};\n\nvar getClickablePlayButtonStyles = function getClickablePlayButtonStyles(isPlayButtonClickable) {\n  if (!isPlayButtonClickable) {\n    return '';\n  }\n\n  return \"\\n    &:hover .\".concat(playButtonClassName, \" {\\n      \").concat(fixedPlayButtonStyles, \"\\n    }\\n  \");\n};\n\nvar getSelectableTickBoxStyles = function getSelectableTickBoxStyles(isTickBoxSelectable) {\n  if (!isTickBoxSelectable) {\n    return '';\n  }\n\n  return \"\\n    &:hover .\".concat(tickBoxClassName, \" {\\n      \").concat(tickboxFixedStyles, \"\\n    }\\n  \");\n};\n\nexport var NewFileExperienceWrapper = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n\"])), function (_ref6) {\n  var breakpoint = _ref6.breakpoint,\n      dimensions = _ref6.dimensions,\n      appearance = _ref6.appearance,\n      shouldUsePointerCursor = _ref6.shouldUsePointerCursor,\n      disableOverlay = _ref6.disableOverlay,\n      displayBackground = _ref6.displayBackground,\n      selected = _ref6.selected,\n      isPlayButtonClickable = _ref6.isPlayButtonClickable,\n      isTickBoxSelectable = _ref6.isTickBoxSelectable,\n      shouldDisplayTooltip = _ref6.shouldDisplayTooltip;\n  return \"\\n    \".concat(transition(), \"\\n    box-sizing: border-box;\\n    * {\\n      box-sizing: border-box;\\n    }\\n    position: relative;\\n    font-family: \").concat(fontFamily(), \";\\n    \").concat(getWrapperDimensions(dimensions, appearance), \"\\n    \").concat(displayBackground ? \"background-color: \".concat(N20, \";\") : '', \"\\n    \").concat(borderRadius, \"\\n    \").concat(getCursorStyle(shouldUsePointerCursor), \"\\n    \").concat(getWrapperShadow(disableOverlay, selected), \"\\n    \").concat(generateResponsiveStyles(breakpoint), \"\\n    \").concat(hideNativeBrowserTextSelectionStyles, \"\\n\\n    /* We use classnames from here exceptionally to be able to handle styles when the Card is on hover */\\n    \").concat(getClickablePlayButtonStyles(isPlayButtonClickable), \"\\n    \").concat(getSelectableTickBoxStyles(isTickBoxSelectable), \"\\n    &:hover .\").concat(blanketClassName, \" {\\n      \").concat(fixedBlanketStyles, \"\\n    }\\n\\n    &:hover .\").concat(actionsBarClassName, \" {\\n      \").concat(fixedActionBarStyles, \"\\n    }\\n\\n    /* Tooltip does not support percentage dimensions. We enforce them here */\\n    \").concat(shouldDisplayTooltip ? \"> div { \".concat(getWrapperDimensions(dimensions, appearance), \" }\") : '', \"\\n\");\n});\nNewFileExperienceWrapper.displayName = 'NewFileExperienceWrapper';\nexport var CardImageContainer = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  position: relative;\\n  max-width: 100%;\\n  width: 100%;\\n  height: 100%;\\n  max-height: 100%;\\n  overflow: hidden;\\n  \", \"\\n\"])), borderRadius);","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2, _templateObject3, _templateObject4, _templateObject5;\n\nimport styled from 'styled-components';\nimport { responsiveSettings, getTitleBoxHeight, Breakpoint } from '../common';\nimport { N0 } from '@atlaskit/theme/colors';\nimport { rgba } from '../../../styles/mixins';\n\nvar generateResponsiveStyles = function generateResponsiveStyles() {\n  var breakpoint = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Breakpoint.SMALL;\n  var setting = responsiveSettings[breakpoint];\n  var verticalPadding = setting.titleBox.verticalPadding;\n  var horizontalPadding = setting.titleBox.horizontalPadding;\n  var height = getTitleBoxHeight(breakpoint);\n  return \"\\n    height: \".concat(height, \"px;\\n    padding: \").concat(verticalPadding, \"px \").concat(horizontalPadding, \"px;\\n  \");\n};\n\nvar HEX_REGEX = /^#[0-9A-F]{6}$/i;\nexport var TitleBoxWrapper = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n\"])), function (_ref) {\n  var breakpoint = _ref.breakpoint,\n      titleBoxBgColor = _ref.titleBoxBgColor;\n  return \"\\n    position: absolute;\\n    bottom: 0;\\n    width: 100%;\\n    background-color: \".concat(rgba(titleBoxBgColor && HEX_REGEX.test(titleBoxBgColor) ? titleBoxBgColor : N0, 0.8), \";\\n    color: inherit;\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    \").concat(generateResponsiveStyles(breakpoint), \"\\n  \");\n});\nTitleBoxWrapper.displayName = 'TitleBoxWrapper';\nvar infoStyles = \"\\n  white-space: nowrap;\\n  overflow: hidden;\\n\";\nvar iconOverlapStyles = \"\\n  padding-right: 10px;\\n\";\nexport var TitleBoxHeader = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  \", \"\\n\"])), function (_ref2) {\n  var hasIconOverlap = _ref2.hasIconOverlap;\n  return \"\\n    font-weight: 600;\\n    \".concat(infoStyles, \"\\n    \").concat(hasIconOverlap && iconOverlapStyles, \"\\n  \");\n});\nTitleBoxHeader.displayName = 'FailedTitleBoxHeader';\nexport var TitleBoxFooter = styled.div(_templateObject3 || (_templateObject3 = _taggedTemplateLiteral([\"\\n  \", \"\\n\"])), function (_ref3) {\n  var hasIconOverlap = _ref3.hasIconOverlap;\n  return \"\\n    text-overflow: ellipsis;\\n    \".concat(infoStyles, \"\\n    \").concat(hasIconOverlap && iconOverlapStyles, \"\\n  \");\n});\nTitleBoxFooter.displayName = 'TitleBoxFooter';\nexport var TitleBoxIcon = styled.div(_templateObject4 || (_templateObject4 = _taggedTemplateLiteral([\"\\n  position: absolute;\\n  right: 4px;\\n  bottom: 0px;\\n\"])));\nTitleBoxIcon.displayName = 'TitleBoxIcon';\nexport var ErrorMessageWrapper = styled.div(_templateObject5 || (_templateObject5 = _taggedTemplateLiteral([\"\\n  display: flex;\\n  align-items: center;\\n  justify-content: flex-start;\\n  span {\\n    vertical-align: middle;\\n    :nth-child(2) {\\n      margin-left: 4px;\\n      margin-right: 4px;\\n    }\\n  }\\n\"])));","import _extends from \"@babel/runtime/helpers/extends\";\nimport React, { useEffect } from 'react';\nimport { MediaImage } from '@atlaskit/media-ui';\nimport { resizeModeToMediaImageProps } from '../../../utils/resizeModeToMediaImageProps';\nexport var ImageRenderer = function ImageRenderer(_ref) {\n  var dataURI = _ref.dataURI,\n      previewOrientation = _ref.previewOrientation,\n      alt = _ref.alt,\n      resizeMode = _ref.resizeMode,\n      onImageLoad = _ref.onImageLoad,\n      onImageError = _ref.onImageError,\n      onDisplayImage = _ref.onDisplayImage,\n      mediaType = _ref.mediaType,\n      nativeLazyLoad = _ref.nativeLazyLoad,\n      forceSyncDisplay = _ref.forceSyncDisplay;\n  useEffect(function () {\n    // TODO: trigger accordingly with the succeeded event. This could be a breaking change\n    if (mediaType === 'image' && onDisplayImage) {\n      onDisplayImage();\n    }\n  }, [mediaType, onDisplayImage]);\n  return /*#__PURE__*/React.createElement(MediaImage, _extends({\n    dataURI: dataURI,\n    alt: alt,\n    previewOrientation: previewOrientation,\n    onImageLoad: onImageLoad,\n    onImageError: onImageError,\n    loading: nativeLazyLoad ? 'lazy' : undefined,\n    forceSyncDisplay: forceSyncDisplay\n  }, resizeModeToMediaImageProps(resizeMode)));\n};","export function resizeModeToMediaImageProps(resizeMode) {\n  return {\n    crop: resizeMode === 'crop',\n    stretch: resizeMode === 'stretchy-fit'\n  };\n}","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2;\n\nimport React from 'react';\nimport styled from 'styled-components';\nvar truncateCommonStyles = \"\\n  display: inline-block;\\n  vertical-align: bottom;\\n  white-space: nowrap;\\n  overflow: hidden;\\n\";\nexport var TruncateLeft = styled.span(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n  max-width: calc(100% - \", \"em);\\n  min-width: \", \";\\n  text-overflow: ellipsis;\\n\"])), truncateCommonStyles, function (_ref) {\n  var fontSizePX = _ref.fontSizePX,\n      endFixedChars = _ref.endFixedChars;\n  return fontFaceScaleFactor(fontSizePX) * endFixedChars + 1;\n}, function (_ref2) {\n  var fontSizePX = _ref2.fontSizePX,\n      startFixedChars = _ref2.startFixedChars;\n  return fontFaceScaleFactor(fontSizePX) * startFixedChars;\n});\nexport var TruncateRight = styled.span(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  \", \"\\n  max-width: calc(100% - \", \");\\n  position: relative;\\n\"])), truncateCommonStyles, function (_ref3) {\n  var fontSizePX = _ref3.fontSizePX,\n      startFixedChars = _ref3.startFixedChars;\n  return fontFaceScaleFactor(fontSizePX) * startFixedChars;\n});\nexport var calculateTruncation = function calculateTruncation(text, startFixedChars, endFixedChars) {\n  var minAllowedLength = endFixedChars + startFixedChars;\n\n  if (text.length <= minAllowedLength) {\n    // if no truncation return same value for left and right\n    return {\n      left: text,\n      right: text\n    };\n  }\n\n  var splitAt = text.length - endFixedChars;\n  var left = text.substr(0, splitAt);\n  var right = text.substr(splitAt);\n  return {\n    left: left,\n    right: right\n  };\n};\n\nvar fontFaceScaleFactor = function fontFaceScaleFactor(fontSizePX) {\n  return fontSizePX / 11 * 0.46;\n};\n/* factor for fontSize of 11px */\n\n\nexport var Truncate = function Truncate(_ref4) {\n  var text = _ref4.text,\n      _ref4$fontSizePX = _ref4.fontSizePX,\n      fontSizePX = _ref4$fontSizePX === void 0 ? 11 : _ref4$fontSizePX,\n      _ref4$startFixedChars = _ref4.startFixedChars,\n      startFixedChars = _ref4$startFixedChars === void 0 ? 4 : _ref4$startFixedChars,\n      _ref4$endFixedChars = _ref4.endFixedChars,\n      endFixedChars = _ref4$endFixedChars === void 0 ? 7 : _ref4$endFixedChars;\n\n  var _calculateTruncation = calculateTruncation(text, startFixedChars, endFixedChars),\n      leftStr = _calculateTruncation.left,\n      rightStr = _calculateTruncation.right;\n\n  if (leftStr === rightStr) {\n    return /*#__PURE__*/React.createElement(React.Fragment, null, text);\n  }\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(TruncateLeft, {\n    fontSizePX: fontSizePX,\n    startFixedChars: startFixedChars,\n    endFixedChars: endFixedChars\n  }, leftStr), /*#__PURE__*/React.createElement(TruncateRight, {\n    fontSizePX: fontSizePX,\n    startFixedChars: startFixedChars,\n    endFixedChars: endFixedChars\n  }, rightStr));\n};","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport styled from 'styled-components';\nimport { borderRadius } from '@atlaskit/media-ui';\nimport { rgba } from '../../../styles/mixins';\nimport { N0, N400 } from '@atlaskit/theme/colors';\nimport { Breakpoint, getTitleBoxHeight, responsiveSettings } from '../common';\nvar height = 3;\nvar padding = 1;\nvar width = 95; // %\n\nvar left = (100 - width) / 2; // %\n\nvar smallSizeSettings = {\n  marginBottom: 4\n};\nvar largeSizeSettings = {\n  marginBottom: 12\n};\nexport function generateResponsiveStyles(breakpoint, positionBottom) {\n  var multiplier = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 1;\n  var setting = breakpoint === Breakpoint.SMALL ? smallSizeSettings : largeSizeSettings;\n  var marginPositionBottom = responsiveSettings[breakpoint].titleBox.verticalPadding;\n  var marginBottom = setting.marginBottom * multiplier + (positionBottom ? marginPositionBottom : getTitleBoxHeight(breakpoint));\n  return \"\\n    bottom: \".concat(marginBottom, \"px\\n  \");\n}\nexport var StyledBar = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n\"])), function (_ref) {\n  var progress = _ref.progress,\n      breakpoint = _ref.breakpoint,\n      positionBottom = _ref.positionBottom;\n  return \"\\n    \".concat(borderRadius, \"\\n    overflow: hidden;\\n    position: absolute;\\n    width: \").concat(width, \"%;\\n    left: \").concat(left, \"%;\\n    background-color: \").concat(rgba(N0, 0.8), \";\\n    height: \").concat(height + padding * 2, \"px;\\n    padding: \").concat(padding, \"px;\\n\\n    ::before {\\n      content: '';\\n      width: \").concat(progress, \"%;\\n      height: 100%;\\n      background-color: \").concat(N400, \";\\n      \").concat(borderRadius, \"\\n      display: block;\\n    }\\n\\n    \").concat(generateResponsiveStyles(breakpoint, positionBottom), \"\\n\");\n});\nStyledBar.displayName = 'StyledProgressBar';","import React from 'react';\nimport LockFilledIcon from '@atlaskit/icon/glyph/lock-filled';\nimport { injectIntl } from 'react-intl-next';\nimport { TitleBoxWrapper, TitleBoxHeader, TitleBoxFooter, TitleBoxIcon } from './styled';\nimport { Truncate } from '@atlaskit/media-ui/truncateText';\nimport { formatDate } from '@atlaskit/media-ui/formatDate';\nexport var FormattedDate = injectIntl(function (_ref) {\n  var timestamp = _ref.timestamp,\n      intl = _ref.intl;\n\n  var _ref2 = intl || {\n    locale: 'en'\n  },\n      _ref2$locale = _ref2.locale,\n      locale = _ref2$locale === void 0 ? 'en' : _ref2$locale;\n\n  return /*#__PURE__*/React.createElement(React.Fragment, null, formatDate(timestamp, locale));\n});\nexport var TitleBox = function TitleBox(_ref3) {\n  var name = _ref3.name,\n      createdAt = _ref3.createdAt,\n      breakpoint = _ref3.breakpoint,\n      titleBoxBgColor = _ref3.titleBoxBgColor,\n      titleBoxIcon = _ref3.titleBoxIcon;\n  return /*#__PURE__*/React.createElement(TitleBoxWrapper, {\n    breakpoint: breakpoint,\n    titleBoxBgColor: titleBoxBgColor\n  }, /*#__PURE__*/React.createElement(TitleBoxHeader, {\n    hasIconOverlap: !!titleBoxIcon && !createdAt\n  }, /*#__PURE__*/React.createElement(Truncate, {\n    text: name\n  })), createdAt ? /*#__PURE__*/React.createElement(TitleBoxFooter, {\n    hasIconOverlap: !!titleBoxIcon\n  }, /*#__PURE__*/React.createElement(FormattedDate, {\n    timestamp: createdAt\n  })) : null, titleBoxIcon === 'LockFilledIcon' && /*#__PURE__*/React.createElement(TitleBoxIcon, null, /*#__PURE__*/React.createElement(LockFilledIcon, {\n    label: \"\",\n    size: \"small\"\n  })));\n};","import React from 'react';\nimport { TitleBoxWrapper, ErrorMessageWrapper } from './styled';\nimport EditorWarningIcon from '@atlaskit/icon/glyph/editor/warning';\nimport { messages } from '@atlaskit/media-ui';\nimport { R300 } from '@atlaskit/theme/colors';\nimport { FormattedMessage } from 'react-intl-next';\nimport { FormattedMessageWrapper } from '../../styled';\nexport var FailedTitleBox = function FailedTitleBox(_ref) {\n  var breakpoint = _ref.breakpoint,\n      _ref$customMessage = _ref.customMessage,\n      customMessage = _ref$customMessage === void 0 ? messages.failed_to_load : _ref$customMessage;\n  return /*#__PURE__*/React.createElement(TitleBoxWrapper, {\n    breakpoint: breakpoint\n  }, /*#__PURE__*/React.createElement(ErrorMessageWrapper, null, /*#__PURE__*/React.createElement(EditorWarningIcon, {\n    label: 'Warning',\n    size: 'small',\n    primaryColor: R300\n  }), /*#__PURE__*/React.createElement(FormattedMessageWrapper, null, /*#__PURE__*/React.createElement(FormattedMessage, customMessage))));\n};","import React from 'react';\nimport { StyledBar } from './styled';\nimport { Breakpoint } from '../common';\nexport var ProgressBar = function ProgressBar(_ref) {\n  var progress = _ref.progress,\n      _ref$breakpoint = _ref.breakpoint,\n      breakpoint = _ref$breakpoint === void 0 ? Breakpoint.SMALL : _ref$breakpoint,\n      _ref$positionBottom = _ref.positionBottom,\n      positionBottom = _ref$positionBottom === void 0 ? false : _ref$positionBottom;\n  var normalizedProgress = Math.min(1, Math.max(0, progress || 0)) * 100;\n  return /*#__PURE__*/React.createElement(StyledBar, {\n    progress: normalizedProgress,\n    breakpoint: breakpoint,\n    positionBottom: positionBottom\n  });\n};","import React from 'react';\nimport VidPlayIcon from '@atlaskit/icon/glyph/vid-play';\nimport { Wrapper, Background } from './styled';\nexport var PlayButton = function PlayButton() {\n  return /*#__PURE__*/React.createElement(Wrapper, null, /*#__PURE__*/React.createElement(Background, null), /*#__PURE__*/React.createElement(VidPlayIcon, {\n    label: \"play\",\n    size: \"large\"\n  }));\n};","import React from 'react';\nimport { Wrapper } from './styled';\nimport TickIcon from '@atlaskit/icon/glyph/check';\nexport var TickBox = function TickBox(_ref) {\n  var selected = _ref.selected;\n  return /*#__PURE__*/React.createElement(Wrapper, {\n    selected: selected\n  }, /*#__PURE__*/React.createElement(TickIcon, {\n    label: \"tick\"\n  }));\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { CardActionIconButtonVariant, CardActionsView } from '../../../utils/cardActions';\nimport { Wrapper } from './styled';\nexport var ActionsBar = /*#__PURE__*/function (_React$Component) {\n  _inherits(ActionsBar, _React$Component);\n\n  var _super = _createSuper(ActionsBar);\n\n  function ActionsBar() {\n    _classCallCheck(this, ActionsBar);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(ActionsBar, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          isFixed = _this$props.isFixed,\n          actions = _this$props.actions;\n\n      if (actions.length === 0) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(Wrapper, {\n        isFixed: isFixed\n      }, /*#__PURE__*/React.createElement(CardActionsView, {\n        actions: actions,\n        variant: CardActionIconButtonVariant.filled\n      }));\n    }\n  }]);\n\n  return ActionsBar;\n}(React.Component);","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\nimport styled from 'styled-components';\nimport { getTitleBoxHeight } from '../common';\nexport function titleBoxHeight(hasTitleBox, breakpoint) {\n  // there is no titlebox\n  if (!hasTitleBox) {\n    return \"0px\";\n  } // calculate height of the titlebox\n\n\n  var marginBottom = getTitleBoxHeight(breakpoint);\n  return \"\".concat(marginBottom, \"px\");\n}\nexport var IconWrapper = styled.div(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \"\\n\"])), function (_ref) {\n  var hasTitleBox = _ref.hasTitleBox,\n      breakpoint = _ref.breakpoint;\n  return \"\\n    position: absolute;\\n    width: 100%;\\n    height: calc(100% - \".concat(titleBoxHeight(hasTitleBox, breakpoint), \");\\n    display: flex;\\n    flex-direction: column;\\n    justify-content: center;\\n    align-items: center;\\n\");\n});\nIconWrapper.displayName = 'MediaIconWrapper';","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject, _templateObject2;\n\nimport styled from 'styled-components';\nimport { keyframes } from 'styled-components';\nimport { N300 } from '@atlaskit/theme/colors';\nvar breatheAnimation = keyframes(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n 0% { opacity: 1}\\n 50% { opacity: 0.3 }\\n 100% { opacity: 1; }\"])));\nvar animatedStyles = \"\\n  animation-name: \".concat(breatheAnimation, \";\\n  animation-duration: 3.5s;\\n  animation-timing-function: ease-in-out;\\n  animation-iteration-count: infinite;\\n\");\nexport var IconMessageWrapper = styled.div(_templateObject2 || (_templateObject2 = _taggedTemplateLiteral([\"\\n  \", \"\\n\"])), function (_ref) {\n  var animated = _ref.animated,\n      reducedFont = _ref.reducedFont;\n  return \"\\n    overflow: hidden;\\n    opacity: 1;\\n    font-weight: 450;\\n    \".concat(reducedFont ? 'font-size: 0.7em;' : '', \"\\n    color: \").concat(N300, \";\\n    text-align:center;\\n    \").concat(animated ? animatedStyles : '', \"\\n    margin-bottom: -1em;\\n    padding: 3px 10px;\\n\");\n});\nIconMessageWrapper.displayName = 'IconMessageWrapper';","import _extends from \"@babel/runtime/helpers/extends\";\nimport React from 'react';\nimport { IconMessageWrapper } from './styled';\nimport { messages } from '@atlaskit/media-ui';\nimport { FormattedMessage } from 'react-intl-next';\nimport { FormattedMessageWrapper } from '../../styled';\nexport var IconMessage = function IconMessage(_ref) {\n  var messageDescriptor = _ref.messageDescriptor,\n      _ref$animated = _ref.animated,\n      animated = _ref$animated === void 0 ? false : _ref$animated,\n      _ref$reducedFont = _ref.reducedFont,\n      reducedFont = _ref$reducedFont === void 0 ? false : _ref$reducedFont;\n  return /*#__PURE__*/React.createElement(IconMessageWrapper, {\n    animated: animated,\n    reducedFont: reducedFont\n  }, /*#__PURE__*/React.createElement(FormattedMessageWrapper, null, /*#__PURE__*/React.createElement(FormattedMessage, messageDescriptor)));\n};\nexport var CreatingPreview = function CreatingPreview(_ref2) {\n  var disableAnimation = _ref2.disableAnimation;\n  return /*#__PURE__*/React.createElement(IconMessage, {\n    messageDescriptor: messages.creating_preview,\n    animated: !disableAnimation\n  });\n};\nexport var PreviewUnavailable = function PreviewUnavailable(props) {\n  return /*#__PURE__*/React.createElement(IconMessage, _extends({}, props, {\n    messageDescriptor: messages.preview_unavailable\n  }));\n};\nexport var FailedToLoad = function FailedToLoad(props) {\n  return /*#__PURE__*/React.createElement(IconMessage, _extends({}, props, {\n    messageDescriptor: messages.failed_to_load\n  }));\n};\nexport var FailedToUpload = function FailedToUpload(props) {\n  return /*#__PURE__*/React.createElement(IconMessage, _extends({}, props, {\n    messageDescriptor: messages.failed_to_upload\n  }));\n};\nexport var PreviewCurrentlyUnavailable = function PreviewCurrentlyUnavailable(props) {\n  return /*#__PURE__*/React.createElement(IconMessage, _extends({}, props, {\n    messageDescriptor: messages.preview_currently_unavailable,\n    reducedFont: true\n  }));\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { withAnalyticsEvents } from '@atlaskit/analytics-next';\nimport { getMediaFeatureFlag } from '@atlaskit/media-common';\nimport { FileCardImageView } from '../files';\nimport { breakpointSize } from '../utils/breakpoint';\nimport { defaultImageCardDimensions, getDefaultCardDimensions } from '../utils/cardDimensions';\nimport { isValidPercentageUnit } from '../utils/isValidPercentageUnit';\nimport { getCSSUnitValue } from '../utils/getCSSUnitValue';\nimport { getElementDimension } from '../utils/getElementDimension';\nimport { Wrapper } from './styled';\nimport { createAndFireMediaCardEvent } from '../utils/analytics';\nimport { attachDetailsToActions } from '../actions';\nimport { getErrorMessage } from '../utils/getErrorMessage';\nimport { toHumanReadableMediaSize, messages } from '@atlaskit/media-ui';\nimport { NewFileExperienceWrapper, CardImageContainer, calcBreakpointSize } from './ui/styled';\nimport { ImageRenderer } from './ui/imageRenderer/imageRenderer';\nimport { TitleBox } from './ui/titleBox/titleBox';\nimport { FailedTitleBox } from './ui/titleBox/failedTitleBox';\nimport { ProgressBar } from './ui/progressBar/progressBar';\nimport { PlayButton } from './ui/playButton/playButton';\nimport { TickBox } from './ui/tickBox/tickBox';\nimport { Blanket } from './ui/blanket/styled';\nimport { ActionsBar } from './ui/actionsBar/actionsBar';\nimport Tooltip from '@atlaskit/tooltip';\nimport { IconWrapper } from './ui/iconWrapper/styled';\nimport { MimeTypeIcon } from '@atlaskit/media-ui/mime-type-icon';\nimport SpinnerIcon from '@atlaskit/spinner';\nimport { PreviewUnavailable, CreatingPreview, FailedToUpload, PreviewCurrentlyUnavailable, FailedToLoad } from './ui/iconMessage';\nimport { isRateLimitedError, isPollingError } from '@atlaskit/media-client';\nimport { newFileExperienceClassName } from './card/cardConstants';\nimport { isUploadError } from '../errors';\n\n/**\n * This is classic vanilla CardView class. To create an instance of class one would need to supply\n * `createAnalyticsEvent` prop to satisfy it's Analytics Events needs.\n */\nexport var CardViewBase = /*#__PURE__*/function (_React$Component) {\n  _inherits(CardViewBase, _React$Component);\n\n  var _super = _createSuper(CardViewBase);\n\n  function CardViewBase() {\n    var _this;\n\n    _classCallCheck(this, CardViewBase);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _super.call.apply(_super, [this].concat(args));\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      didImageRender: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"divRef\", /*#__PURE__*/React.createRef());\n\n    _defineProperty(_assertThisInitialized(_this), \"onImageLoad\", function () {\n      var onImageLoad = _this.props.onImageLoad; // We render the icon & icon message always, even if there is dataURI available.\n      // If the image fails to load/render, the icon will remain, i.e. the user won't see a change until\n      // the root card decides to chage status to error.\n      // If the image renders successfully, we switch this variable to hide the icon & icon message\n      // behind the thumbnail in case the image has transparency.\n      // It is less likely that root component replaces a suceeded dataURI for a failed one\n      // than the opposite case. Therefore we prefer to hide the icon instead show when the image fails,\n      // for a smoother transition\n\n      _this.setState({\n        didImageRender: true\n      });\n\n      onImageLoad && onImageLoad();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onImageError\", function () {\n      var onImageError = _this.props.onImageError;\n\n      _this.setState({\n        didImageRender: false\n      });\n\n      onImageError && onImageError();\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"saveElementWidth\", function () {\n      var dimensions = _this.props.dimensions;\n\n      if (!dimensions) {\n        return;\n      }\n\n      var width = dimensions.width;\n\n      if (width && isValidPercentageUnit(width) && !!_this.divRef.current) {\n        var elementWidth = getElementDimension(_this.divRef.current, 'width');\n\n        _this.setState({\n          elementWidth: elementWidth\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderFileNewExperience\", function () {\n      var _this$props = _this.props,\n          dimensions = _this$props.dimensions,\n          appearance = _this$props.appearance,\n          onClick = _this$props.onClick,\n          onMouseEnter = _this$props.onMouseEnter,\n          testId = _this$props.testId,\n          metadata = _this$props.metadata,\n          status = _this$props.status,\n          selected = _this$props.selected,\n          selectable = _this$props.selectable,\n          disableOverlay = _this$props.disableOverlay,\n          dataURI = _this$props.dataURI;\n\n      var _ref = metadata || {},\n          name = _ref.name;\n\n      var shouldUsePointerCursor = status !== 'error' && status !== 'failed-processing';\n      var shouldDisplayBackground = !dataURI || !disableOverlay || status === 'error' || status === 'failed-processing';\n      var isPlayButtonClickable = !!(_this.shouldRenderPlayButton() && disableOverlay);\n      var isTickBoxSelectable = !disableOverlay && !!selectable && !selected; // Disable tooltip for Media Single\n\n      var shouldDisplayTooltip = !disableOverlay;\n      return /*#__PURE__*/React.createElement(NewFileExperienceWrapper, {\n        className: newFileExperienceClassName,\n        \"data-testid\": testId || 'media-card-view',\n        dimensions: dimensions,\n        appearance: appearance,\n        onClick: onClick,\n        onMouseEnter: onMouseEnter,\n        innerRef: _this.divRef,\n        breakpoint: _this.breakpoint,\n        shouldUsePointerCursor: shouldUsePointerCursor,\n        disableOverlay: !!disableOverlay,\n        selected: !!selected,\n        displayBackground: shouldDisplayBackground,\n        isPlayButtonClickable: isPlayButtonClickable,\n        isTickBoxSelectable: isTickBoxSelectable,\n        shouldDisplayTooltip: shouldDisplayTooltip\n      }, shouldDisplayTooltip ? /*#__PURE__*/React.createElement(Tooltip, {\n        content: name,\n        position: \"bottom\",\n        tag: 'div'\n      }, _this.renderNewExperienceCard()) : _this.renderNewExperienceCard());\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderFile\", function () {\n      var _this$props2 = _this.props,\n          status = _this$props2.status,\n          mediaItemType = _this$props2.mediaItemType,\n          metadata = _this$props2.metadata,\n          dataURI = _this$props2.dataURI,\n          progress = _this$props2.progress,\n          resizeMode = _this$props2.resizeMode,\n          dimensions = _this$props2.dimensions,\n          selectable = _this$props2.selectable,\n          selected = _this$props2.selected,\n          disableOverlay = _this$props2.disableOverlay,\n          previewOrientation = _this$props2.previewOrientation,\n          alt = _this$props2.alt,\n          onDisplayImage = _this$props2.onDisplayImage,\n          actions = _this$props2.actions;\n\n      var _ref2 = metadata || {},\n          name = _ref2.name,\n          mediaType = _ref2.mediaType,\n          mimeType = _ref2.mimeType,\n          size = _ref2.size;\n\n      var actionsWithDetails = metadata && actions ? attachDetailsToActions(actions, metadata) : [];\n      var errorMessage = getErrorMessage(status);\n      var fileSize = !size ? '' : toHumanReadableMediaSize(size);\n      return /*#__PURE__*/React.createElement(FileCardImageView, {\n        error: errorMessage,\n        dimensions: dimensions,\n        selectable: selectable,\n        selected: selected,\n        dataURI: dataURI,\n        mediaName: name,\n        mediaType: mediaType,\n        mimeType: mimeType,\n        fileSize: fileSize,\n        status: status,\n        mediaItemType: mediaItemType,\n        progress: progress,\n        resizeMode: resizeMode,\n        onDisplayImage: onDisplayImage,\n        actions: actionsWithDetails,\n        disableOverlay: disableOverlay,\n        previewOrientation: previewOrientation,\n        alt: alt,\n        onImageLoad: _this.onImageLoad,\n        onImageError: _this.onImageError\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getRenderConfigByStatus\", function () {\n      var _this$props3 = _this.props,\n          dataURI = _this$props3.dataURI,\n          status = _this$props3.status,\n          metadata = _this$props3.metadata,\n          disableOverlay = _this$props3.disableOverlay,\n          error = _this$props3.error,\n          selectable = _this$props3.selectable,\n          disableAnimation = _this$props3.disableAnimation;\n\n      var _ref3 = metadata || {},\n          name = _ref3.name,\n          mediaType = _ref3.mediaType;\n\n      var didImageRender = _this.state.didImageRender;\n      var isZeroSize = !!(metadata && metadata.size === 0);\n      var defaultConfig = {\n        renderTypeIcon: !didImageRender,\n        renderImageRenderer: !!dataURI,\n        renderPlayButton: !!dataURI && mediaType === 'video',\n        renderBlanket: !disableOverlay,\n        renderTitleBox: !disableOverlay && !!name,\n        renderTickBox: !disableOverlay && !!selectable\n      };\n\n      switch (status) {\n        case 'uploading':\n          return _objectSpread(_objectSpread({}, defaultConfig), {}, {\n            renderBlanket: !disableOverlay || mediaType !== 'video',\n            isFixedBlanket: true,\n            renderProgressBar: true\n          });\n\n        case 'processing':\n        case 'loading-preview':\n          return _objectSpread(_objectSpread({}, defaultConfig), {}, {\n            iconMessage: !didImageRender && !isZeroSize ? /*#__PURE__*/React.createElement(CreatingPreview, {\n              disableAnimation: disableAnimation\n            }) : undefined\n          });\n\n        case 'complete':\n          return defaultConfig;\n\n        case 'error':\n        case 'failed-processing':\n          var baseErrorConfig = _objectSpread(_objectSpread({}, defaultConfig), {}, {\n            renderTypeIcon: true,\n            renderImageRenderer: false,\n            renderTitleBox: false,\n            renderPlayButton: false\n          });\n\n          var iconMessage;\n          var customTitleMessage;\n\n          var _ref4 = error || {},\n              secondaryError = _ref4.secondaryError;\n\n          if (isRateLimitedError(secondaryError) || isPollingError(secondaryError)) {\n            iconMessage = /*#__PURE__*/React.createElement(PreviewCurrentlyUnavailable, null);\n          } else if (isUploadError(error)) {\n            iconMessage = /*#__PURE__*/React.createElement(FailedToUpload, null);\n            customTitleMessage = messages.failed_to_upload;\n          } else if (!metadata) {\n            iconMessage = /*#__PURE__*/React.createElement(FailedToLoad, null);\n          } else {\n            iconMessage = /*#__PURE__*/React.createElement(PreviewUnavailable, null);\n          }\n\n          if (!disableOverlay) {\n            var renderFailedTitleBox = !name || !!customTitleMessage;\n            return _objectSpread(_objectSpread({}, baseErrorConfig), {}, {\n              renderTitleBox: !!name && !customTitleMessage,\n              renderFailedTitleBox: renderFailedTitleBox,\n              iconMessage: !renderFailedTitleBox ? iconMessage : undefined,\n              customTitleMessage: customTitleMessage\n            });\n          }\n\n          return _objectSpread(_objectSpread({}, baseErrorConfig), {}, {\n            iconMessage: iconMessage\n          });\n\n        case 'loading':\n        default:\n          return _objectSpread(_objectSpread({}, defaultConfig), {}, {\n            renderPlayButton: false,\n            renderTypeIcon: false,\n            renderSpinner: !didImageRender\n          });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderNewExperienceCard\", function () {\n      var _this$getRenderConfig = _this.getRenderConfigByStatus(),\n          renderTypeIcon = _this$getRenderConfig.renderTypeIcon,\n          iconMessage = _this$getRenderConfig.iconMessage,\n          renderImageRenderer = _this$getRenderConfig.renderImageRenderer,\n          renderSpinner = _this$getRenderConfig.renderSpinner,\n          renderPlayButton = _this$getRenderConfig.renderPlayButton,\n          renderBlanket = _this$getRenderConfig.renderBlanket,\n          renderProgressBar = _this$getRenderConfig.renderProgressBar,\n          renderTitleBox = _this$getRenderConfig.renderTitleBox,\n          renderFailedTitleBox = _this$getRenderConfig.renderFailedTitleBox,\n          renderTickBox = _this$getRenderConfig.renderTickBox,\n          isFixedBlanket = _this$getRenderConfig.isFixedBlanket,\n          customTitleMessage = _this$getRenderConfig.customTitleMessage;\n\n      var _this$props4 = _this.props,\n          progress = _this$props4.progress,\n          selected = _this$props4.selected,\n          status = _this$props4.status,\n          metadata = _this$props4.metadata;\n\n      var _ref5 = metadata || {},\n          name = _ref5.name;\n\n      var hasTitleBox = !!renderTitleBox || !!renderFailedTitleBox;\n      return /*#__PURE__*/React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(CardImageContainer, {\n        className: \"media-file-card-view\",\n        \"data-testid\": \"media-file-card-view\",\n        \"data-test-media-name\": name,\n        \"data-test-status\": status,\n        \"data-test-progress\": progress,\n        \"data-test-selected\": selected ? true : undefined\n      }, renderTypeIcon && _this.renderMediaTypeIcon(hasTitleBox, iconMessage), renderSpinner && _this.renderSpinner(hasTitleBox), renderImageRenderer && _this.renderImageRenderer(), renderPlayButton && _this.renderPlayButton(hasTitleBox), renderBlanket && _this.renderBlanket(!!isFixedBlanket), renderTitleBox && _this.renderTitleBox(), renderFailedTitleBox && _this.renderFailedTitleBox(customTitleMessage), renderProgressBar && _this.renderProgressBar(!hasTitleBox), renderTickBox && _this.renderTickBox()), _this.renderActionsBar());\n    });\n\n    return _this;\n  }\n\n  _createClass(CardViewBase, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.saveElementWidth();\n      var innerRef = this.props.innerRef;\n      !!innerRef && !!this.divRef.current && innerRef(this.divRef.current);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(_ref6) {\n      var prevDataURI = _ref6.dataURI;\n      var dataURI = this.props.dataURI; // We should only switch didImageRender to false\n      // when dataURI goes undefined, not when it is updated.\n      // as this method could be triggered after onImageLoad callback,\n      // falling on a race condition\n\n      prevDataURI && !dataURI && this.setState({\n        didImageRender: false\n      });\n    }\n  }, {\n    key: \"width\",\n    get: // This width is only used to calculate breakpoints, dimensions are passed down as\n    // integrator pass it to the root component\n    function get() {\n      var elementWidth = this.state.elementWidth;\n\n      if (elementWidth) {\n        return elementWidth;\n      }\n\n      var _ref7 = this.props.dimensions || {\n        width: undefined\n      },\n          width = _ref7.width;\n\n      if (!width) {\n        return defaultImageCardDimensions.width;\n      }\n\n      return getCSSUnitValue(width);\n    }\n  }, {\n    key: \"breakpoint\",\n    get: function get() {\n      var width = this.state.elementWidth || (this.props.dimensions ? this.props.dimensions.width : '') || defaultImageCardDimensions.width;\n      return calcBreakpointSize(parseInt(\"\".concat(width), 10));\n    } // If the dimensions.width is a percentage, we need to transform it\n    // into a pixel value in order to get the right breakpoints applied.\n\n  }, {\n    key: \"render\",\n    value: function render() {\n      var featureFlags = this.props.featureFlags;\n\n      if (getMediaFeatureFlag('newCardExperience', featureFlags)) {\n        return this.renderFileNewExperience();\n      }\n\n      var _this$props5 = this.props,\n          dimensions = _this$props5.dimensions,\n          appearance = _this$props5.appearance,\n          onClick = _this$props5.onClick,\n          onMouseEnter = _this$props5.onMouseEnter,\n          testId = _this$props5.testId;\n      var wrapperDimensions = dimensions ? dimensions : getDefaultCardDimensions(appearance);\n      return /*#__PURE__*/React.createElement(Wrapper, {\n        \"data-testid\": testId || 'media-card-view',\n        shouldUsePointerCursor: true,\n        breakpointSize: breakpointSize(this.width),\n        dimensions: wrapperDimensions,\n        onClick: onClick,\n        onMouseEnter: onMouseEnter,\n        innerRef: this.divRef\n      }, this.renderFile());\n    }\n  }, {\n    key: \"renderSpinner\",\n    value: function renderSpinner(hasTitleBox) {\n      return /*#__PURE__*/React.createElement(IconWrapper, {\n        breakpoint: this.breakpoint,\n        hasTitleBox: hasTitleBox\n      }, /*#__PURE__*/React.createElement(SpinnerIcon, null));\n    }\n  }, {\n    key: \"shouldRenderPlayButton\",\n    value: function shouldRenderPlayButton() {\n      var _this$props6 = this.props,\n          metadata = _this$props6.metadata,\n          dataURI = _this$props6.dataURI;\n\n      var _ref8 = metadata || {},\n          mediaType = _ref8.mediaType;\n\n      if (mediaType !== 'video' || !dataURI) {\n        return false;\n      }\n\n      return true;\n    }\n  }, {\n    key: \"renderPlayButton\",\n    value: function renderPlayButton(hasTitleBox) {\n      return /*#__PURE__*/React.createElement(IconWrapper, {\n        breakpoint: this.breakpoint,\n        hasTitleBox: hasTitleBox\n      }, /*#__PURE__*/React.createElement(PlayButton, null), \";\");\n    } //This Blanket will provide a shadow backround for uploading status by\n    //setting isFixed.\n\n  }, {\n    key: \"renderBlanket\",\n    value: function renderBlanket(isFixed) {\n      return /*#__PURE__*/React.createElement(Blanket, {\n        isFixed: isFixed\n      });\n    }\n  }, {\n    key: \"renderTitleBox\",\n    value: function renderTitleBox() {\n      var _this$props7 = this.props,\n          metadata = _this$props7.metadata,\n          titleBoxBgColor = _this$props7.titleBoxBgColor,\n          titleBoxIcon = _this$props7.titleBoxIcon;\n\n      var _ref9 = metadata || {},\n          name = _ref9.name,\n          createdAt = _ref9.createdAt;\n\n      return !!name && /*#__PURE__*/React.createElement(TitleBox, {\n        name: name,\n        createdAt: createdAt,\n        breakpoint: this.breakpoint,\n        titleBoxIcon: titleBoxIcon,\n        titleBoxBgColor: titleBoxBgColor\n      });\n    }\n  }, {\n    key: \"renderFailedTitleBox\",\n    value: function renderFailedTitleBox(customMessage) {\n      return /*#__PURE__*/React.createElement(FailedTitleBox, {\n        breakpoint: this.breakpoint,\n        customMessage: customMessage\n      });\n    }\n  }, {\n    key: \"renderProgressBar\",\n    value: function renderProgressBar(positionBottom) {\n      var progress = this.props.progress;\n      return /*#__PURE__*/React.createElement(ProgressBar, {\n        progress: progress,\n        breakpoint: this.breakpoint,\n        positionBottom: positionBottom\n      });\n    }\n  }, {\n    key: \"renderImageRenderer\",\n    value: function renderImageRenderer() {\n      var _this$props8 = this.props,\n          dataURI = _this$props8.dataURI,\n          _this$props8$metadata = _this$props8.metadata;\n      _this$props8$metadata = _this$props8$metadata === void 0 ? {} : _this$props8$metadata;\n      var _this$props8$metadata2 = _this$props8$metadata.mediaType,\n          mediaType = _this$props8$metadata2 === void 0 ? 'unknown' : _this$props8$metadata2,\n          previewOrientation = _this$props8.previewOrientation,\n          alt = _this$props8.alt,\n          resizeMode = _this$props8.resizeMode,\n          onDisplayImage = _this$props8.onDisplayImage,\n          nativeLazyLoad = _this$props8.nativeLazyLoad,\n          forceSyncDisplay = _this$props8.forceSyncDisplay;\n      return !!dataURI && /*#__PURE__*/React.createElement(ImageRenderer, {\n        dataURI: dataURI,\n        mediaType: mediaType,\n        previewOrientation: previewOrientation,\n        alt: alt,\n        resizeMode: resizeMode,\n        onDisplayImage: onDisplayImage,\n        onImageLoad: this.onImageLoad,\n        onImageError: this.onImageError,\n        nativeLazyLoad: nativeLazyLoad,\n        forceSyncDisplay: forceSyncDisplay\n      });\n    }\n  }, {\n    key: \"renderTickBox\",\n    value: function renderTickBox() {\n      var selected = this.props.selected;\n      return /*#__PURE__*/React.createElement(TickBox, {\n        selected: selected\n      });\n    }\n  }, {\n    key: \"renderMediaTypeIcon\",\n    value: function renderMediaTypeIcon(hasTitleBox, iconMessage) {\n      var metadata = this.props.metadata;\n\n      var _ref10 = metadata || {},\n          mediaType = _ref10.mediaType,\n          mimeType = _ref10.mimeType,\n          name = _ref10.name;\n\n      return /*#__PURE__*/React.createElement(IconWrapper, {\n        breakpoint: this.breakpoint,\n        hasTitleBox: hasTitleBox\n      }, /*#__PURE__*/React.createElement(MimeTypeIcon, {\n        testId: 'media-card-file-type-icon',\n        mediaType: mediaType,\n        mimeType: mimeType,\n        name: name\n      }), iconMessage);\n    }\n  }, {\n    key: \"renderActionsBar\",\n    value: function renderActionsBar() {\n      var _this$props9 = this.props,\n          disableOverlay = _this$props9.disableOverlay,\n          actions = _this$props9.actions,\n          metadata = _this$props9.metadata;\n      var actionsWithDetails = metadata && actions ? attachDetailsToActions(actions, metadata) : [];\n\n      if (disableOverlay || !actions || actions.length === 0) {\n        return null;\n      }\n\n      return /*#__PURE__*/React.createElement(ActionsBar, {\n        actions: actionsWithDetails\n      });\n    }\n  }]);\n\n  return CardViewBase;\n}(React.Component);\n\n_defineProperty(CardViewBase, \"defaultProps\", {\n  appearance: 'auto'\n});\n\nexport var CardView = withAnalyticsEvents({\n  onClick: createAndFireMediaCardEvent({\n    eventType: 'ui',\n    action: 'clicked',\n    actionSubject: 'mediaCard',\n    attributes: {}\n  })\n})(CardViewBase);","export default function getElementBounds(element) {\n  if (!element) {\n    return undefined;\n  }\n\n  var rect = element.getBoundingClientRect();\n  return {\n    left: window.pageXOffset + rect.left,\n    right: window.pageXOffset + rect.left + rect.width,\n    top: window.pageYOffset + rect.top,\n    bottom: window.pageYOffset + rect.top + rect.height\n  };\n}","function _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; var ownKeys = Object.keys(source); if (typeof Object.getOwnPropertySymbols === 'function') { ownKeys = ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function (sym) { return Object.getOwnPropertyDescriptor(source, sym).enumerable; })); } ownKeys.forEach(function (key) { _defineProperty(target, key, source[key]); }); } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport getElementBounds from './getElementBounds';\nexport default function (container) {\n  if (!container) {\n    return undefined;\n  }\n\n  if (container === window) {\n    return {\n      top: window.pageYOffset,\n      left: window.pageXOffset,\n      bottom: window.pageYOffset + window.innerHeight,\n      right: window.pageXOffset + window.innerWidth\n    };\n  } else {\n    var bounds = getElementBounds(container);\n\n    if (bounds) {\n      return _objectSpread({}, bounds, {\n        bottom: bounds.top + container.offsetHeight,\n        right: bounds.left + container.offsetWidth\n      });\n    } else {\n      return undefined;\n    }\n  }\n}","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nexport default function (offset) {\n  if (!offset) {\n    return undefined;\n  }\n\n  var offsetTop;\n  var offsetRight;\n  var offsetBottom;\n  var offsetLeft;\n\n  if (_typeof(offset) === 'object') {\n    offsetTop = offset.top || 0;\n    offsetRight = offset.right || 0;\n    offsetBottom = offset.bottom || 0;\n    offsetLeft = offset.left || 0;\n  } else {\n    offsetTop = offset || 0;\n    offsetRight = offset || 0;\n    offsetBottom = offset || 0;\n    offsetLeft = offset || 0;\n  }\n\n  return {\n    top: offsetTop,\n    right: offsetRight,\n    bottom: offsetBottom,\n    left: offsetLeft\n  };\n}","export default function (elementBounds, viewportBounds, offset) {\n  var offsetTop = offset && offset.top || 0;\n  var offsetRight = offset && offset.right || 0;\n  var offsetBottom = offset && offset.bottom || 0;\n  var offsetLeft = offset && offset.left || 0;\n  return elementBounds.bottom + offsetBottom >= viewportBounds.top && elementBounds.top - offsetTop <= viewportBounds.bottom && elementBounds.right + offsetRight >= viewportBounds.left && elementBounds.left - offsetLeft <= viewportBounds.right;\n}","var isPassiveListenerSupported = function isPassiveListenerSupported() {\n  var supported = false;\n\n  try {\n    var opts = Object.defineProperty({}, 'passive', {\n      get: function get() {\n        supported = true;\n      }\n    });\n    window.addEventListener('test', null, opts);\n    window.removeEventListener('test', null, opts);\n  } catch (e) {}\n\n  return supported;\n};\n\nexport default isPassiveListenerSupported() ? {\n  passive: true\n} : undefined;","function _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport * as React from 'react';\nimport scrollParent from 'scrollparent';\nimport _getViewportBounds from './utils/getViewportBounds';\nimport _getElementBounds from './utils/getElementBounds';\nimport convertOffsetToBounds from './utils/convertOffsetToBounds';\nimport isElementInViewport from './utils/isElementInViewport';\nimport isBackCompatMode from './utils/isBackCompatMode';\nimport eventListenerOptions from './utils/eventListenerOptions';\n\nvar LazilyRender =\n/*#__PURE__*/\nfunction (_React$Component) {\n  _inherits(LazilyRender, _React$Component);\n\n  function LazilyRender() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, LazilyRender);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(LazilyRender)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"raf\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"element\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"container\", void 0);\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      hasBeenScrolledIntoView: false\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"update\", function () {\n      cancelAnimationFrame(_this.raf);\n      _this.raf = requestAnimationFrame(function () {\n        var elementBounds = _this.getElementBounds();\n\n        var viewportBounds = _this.getViewportBounds();\n\n        var offsetBounds = _this.getOffsetBounds();\n\n        if (!elementBounds || !viewportBounds) {\n          return;\n        }\n\n        if (isElementInViewport(elementBounds, viewportBounds, offsetBounds)) {\n          _this.stopListening(_this.container);\n\n          _this.setState({\n            hasBeenScrolledIntoView: true\n          }, function () {\n            var onRender = _this.props.onRender;\n\n            if (onRender) {\n              onRender();\n            }\n          });\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"handleMount\", function (element) {\n      var scrollContainer = _this.props.scrollContainer;\n      _this.element = element;\n      _this.container = _this.getContainer(scrollContainer);\n    });\n\n    return _this;\n  }\n\n  _createClass(LazilyRender, [{\n    key: \"getContainer\",\n    value: function getContainer(scrollContainer) {\n      if (scrollContainer) {\n        return scrollContainer;\n      } else {\n        if (this.element) {\n          var container = scrollParent(this.element);\n\n          if (container === document.scrollingElement || container === document.documentElement || !isBackCompatMode() && container == document.body) {\n            return window;\n          } else {\n            return container;\n          }\n        } else {\n          return undefined;\n        }\n      }\n    }\n  }, {\n    key: \"getViewportBounds\",\n    value: function getViewportBounds() {\n      return _getViewportBounds(this.container);\n    }\n  }, {\n    key: \"getElementBounds\",\n    value: function getElementBounds() {\n      return _getElementBounds(this.element);\n    }\n  }, {\n    key: \"getOffsetBounds\",\n    value: function getOffsetBounds() {\n      var offset = this.props.offset;\n      return convertOffsetToBounds(offset);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var _this2 = this;\n\n      var prevContainer = prevProps.scrollContainer;\n      var nextContainer = this.props.scrollContainer; // If a scroll container was defined before, do some cleanup\n      // and bootstrap the next scroll container.\n\n      if (prevContainer !== nextContainer) {\n        // If the previous container was already utilised, no cleanup\n        // is required - already done in LazilyRender.update().\n        if (!prevState.hasBeenScrolledIntoView) {\n          this.stopListening(prevContainer);\n        } // Set a new listener if the scrollContainer is defined, and update \n        // the container property accordingly. Note: this should only be done\n        // when the next container is different.\n\n\n        this.container = this.getContainer(nextContainer);\n        this.startListening(this.container); // Signal that the element has not been scrolled into view and \n        // recompute its position. This will essentially 'reset' the node's\n        // current status back to a placeholder item if need be.\n\n        this.setState({\n          hasBeenScrolledIntoView: false\n        }, function () {\n          _this2.update();\n        });\n      }\n    }\n  }, {\n    key: \"startListening\",\n    value: function startListening(container) {\n      if (container) container.addEventListener('scroll', this.update, eventListenerOptions);\n      window.addEventListener('resize', this.update);\n    }\n  }, {\n    key: \"stopListening\",\n    value: function stopListening(container) {\n      if (container) container.removeEventListener('scroll', this.update, eventListenerOptions);\n      window.removeEventListener('resize', this.update);\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.update();\n      this.startListening(this.container);\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.stopListening(this.container);\n    }\n  }, {\n    key: \"renderChildren\",\n    value: function renderChildren() {\n      var _this$props = this.props,\n          placeholder = _this$props.placeholder,\n          content = _this$props.content,\n          children = _this$props.children;\n      var hasBeenScrolledIntoView = this.state.hasBeenScrolledIntoView;\n\n      if (!hasBeenScrolledIntoView && placeholder) {\n        return placeholder;\n      }\n\n      if (hasBeenScrolledIntoView && content) {\n        return content;\n      }\n\n      if (children) {\n        return children(hasBeenScrolledIntoView);\n      }\n\n      return null;\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$props2 = this.props,\n          className = _this$props2.className,\n          component = _this$props2.component;\n      return React.createElement(component || 'div', {\n        ref: this.handleMount,\n        className: className,\n        children: this.renderChildren()\n      });\n    }\n  }]);\n\n  return LazilyRender;\n}(React.Component);\n\nexport { LazilyRender as default };","import _taggedTemplateLiteral from \"@babel/runtime/helpers/taggedTemplateLiteral\";\n\nvar _templateObject;\n\n// @ts-ignore: unused variable\n// prettier-ignore\nimport LazilyRender from 'react-lazily-render'; // @ts-ignore: unused variable\n// prettier-ignore\n\nimport styled from 'styled-components';\nimport { size } from '@atlaskit/media-ui'; // We need to override the element provided by the library\n// in order to make it get the parent dimensions.\n\nexport var Wrapper = styled(LazilyRender)(_templateObject || (_templateObject = _taggedTemplateLiteral([\"\\n  \", \";\\n\"])), size());","export default (function () {\n  return document.compatMode === \"BackCompat\";\n});","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React from 'react';\nimport { Wrapper } from './styled';\nexport var LazyContent = /*#__PURE__*/function (_React$Component) {\n  _inherits(LazyContent, _React$Component);\n\n  var _super = _createSuper(LazyContent);\n\n  function LazyContent() {\n    _classCallCheck(this, LazyContent);\n\n    return _super.apply(this, arguments);\n  }\n\n  _createClass(LazyContent, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n          children = _this$props.children,\n          placeholder = _this$props.placeholder,\n          onRender = _this$props.onRender;\n      return /*#__PURE__*/React.createElement(Wrapper, {\n        offset: 300,\n        onRender: onRender,\n        placeholder: placeholder,\n        content: children\n      });\n    }\n  }]);\n\n  return LazyContent;\n}(React.Component);","function _createForOfIteratorHelper(o, allowArrayLike) { var it = typeof Symbol !== \"undefined\" && o[Symbol.iterator] || o[\"@@iterator\"]; if (!it) { if (Array.isArray(o) || (it = _unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") { if (it) o = it; var i = 0; var F = function F() {}; return { s: F, n: function n() { if (i >= o.length) return { done: true }; return { done: false, value: o[i++] }; }, e: function e(_e) { throw _e; }, f: F }; } throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); } var normalCompletion = true, didErr = false, err; return { s: function s() { it = it.call(o); }, n: function n() { var step = it.next(); normalCompletion = step.done; return step; }, e: function e(_e2) { didErr = true; err = _e2; }, f: function f() { try { if (!normalCompletion && it.return != null) it.return(); } finally { if (didErr) throw err; } } }; }\n\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\n\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) { arr2[i] = arr[i]; } return arr2; }\n\nimport React, { useEffect } from 'react';\nimport { LazyContent } from './lazyContent';\n\nvar createIntersectionObserverCallback = function createIntersectionObserverCallback(onVisible) {\n  return function (entries, observer) {\n    var _iterator = _createForOfIteratorHelper(entries),\n        _step;\n\n    try {\n      for (_iterator.s(); !(_step = _iterator.n()).done;) {\n        var entry = _step.value;\n\n        if (entry.isIntersecting) {\n          onVisible();\n          observer.disconnect();\n          break;\n        }\n      }\n    } catch (err) {\n      _iterator.e(err);\n    } finally {\n      _iterator.f();\n    }\n  };\n};\n\nvar Observer = function Observer(_ref) {\n  var onVisible = _ref.onVisible,\n      children = _ref.children,\n      targetRef = _ref.targetRef;\n  useEffect(function () {\n    // IntersectionObserver uses root and target elements to detect intersections, defaulting root to the viewport\n    var intersectionObserver = new IntersectionObserver(createIntersectionObserverCallback(onVisible));\n    targetRef && intersectionObserver.observe(targetRef);\n    return function () {\n      intersectionObserver.disconnect();\n    };\n  }, [targetRef, onVisible]);\n  return /*#__PURE__*/React.createElement(React.Fragment, null, children);\n};\n\nexport var createViewportDetector = function createViewportDetector(isIntersectionObserverSupported) {\n  return function (_ref2) {\n    var children = _ref2.children,\n        targetRef = _ref2.targetRef,\n        onVisible = _ref2.onVisible;\n    return isIntersectionObserverSupported ? /*#__PURE__*/React.createElement(Observer, {\n      targetRef: targetRef,\n      onVisible: onVisible\n    }, children) : /*#__PURE__*/React.createElement(LazyContent, {\n      placeholder: /*#__PURE__*/React.createElement(React.Fragment, null, children),\n      onRender: onVisible\n    }, children);\n  };\n};\nexport var ViewportDetector = createViewportDetector(typeof IntersectionObserver !== 'undefined');","export var containsPixelUnit = function containsPixelUnit(value) {\n  return value.substr(-2) === 'px' && !isNaN(+value.slice(0, -2));\n};","import { isRetina } from './isRetina';\nimport { getElementDimension } from './getElementDimension';\nimport { defaultImageCardDimensions } from './cardDimensions';\nimport { isValidPercentageUnit } from './isValidPercentageUnit';\nimport { containsPixelUnit } from './containsPixelUnit';\nexport var getDataURIDimension = function getDataURIDimension(dimension, options) {\n  var retinaFactor = isRetina() ? 2 : 1;\n  var dimensionValue = options.dimensions && options.dimensions[dimension] || '';\n\n  if (isValidPercentageUnit(dimensionValue) && options.element) {\n    return getElementDimension(options.element, dimension) * retinaFactor;\n  }\n\n  if (typeof dimensionValue === 'number') {\n    return dimensionValue * retinaFactor;\n  }\n\n  if (containsPixelUnit(\"\".concat(dimensionValue))) {\n    return parseInt(\"\".concat(dimensionValue), 10) * retinaFactor;\n  }\n\n  return defaultImageCardDimensions[dimension] * retinaFactor;\n};\nexport var getRequestedDimensions = function getRequestedDimensions(options) {\n  var width = getDataURIDimension('width', options);\n  var height = getDataURIDimension('height', options);\n  return {\n    width: width,\n    height: height\n  };\n};","export function isRetina() {\n  var mediaQuery = '(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)';\n  return window.devicePixelRatio > 1 || window.matchMedia && window.matchMedia(mediaQuery).matches;\n}","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _get from \"@babel/runtime/helpers/get\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport { LRUCache } from 'lru-fast';\nimport { EventEmitter2 } from 'eventemitter2';\nexport var PREVIEW_CACHE_LRU_SIZE = 50;\n\nvar ExtendedLRUCache = /*#__PURE__*/function (_LRUCache) {\n  _inherits(ExtendedLRUCache, _LRUCache);\n\n  var _super = _createSuper(ExtendedLRUCache);\n\n  function ExtendedLRUCache(limit) {\n    var _this;\n\n    _classCallCheck(this, ExtendedLRUCache);\n\n    _this = _super.call(this, limit);\n    _this.eventEmitter = new EventEmitter2();\n    return _this;\n  }\n\n  _createClass(ExtendedLRUCache, [{\n    key: \"shift\",\n    value: function shift() {\n      var entry = _get(_getPrototypeOf(ExtendedLRUCache.prototype), \"shift\", this).call(this);\n\n      this.eventEmitter.emit('shift', entry);\n      return entry;\n    }\n  }, {\n    key: \"on\",\n    value: function on(event, callback) {\n      this.eventEmitter.on(event, callback);\n    }\n  }]);\n\n  return ExtendedLRUCache;\n}(LRUCache);\n\nexport var ObjectURLCache = /*#__PURE__*/function () {\n  function ObjectURLCache(size) {\n    _classCallCheck(this, ObjectURLCache);\n\n    this.cache = new ExtendedLRUCache(size);\n    this.cache.on('shift', function (entry) {\n      if (entry && entry.value.dataURI) {\n        URL.revokeObjectURL(entry.value.dataURI);\n      }\n    });\n  }\n\n  _createClass(ObjectURLCache, [{\n    key: \"has\",\n    value: function has(key) {\n      return !!this.cache.find(key);\n    }\n  }, {\n    key: \"get\",\n    value: function get(key) {\n      return this.cache.get(key);\n    }\n  }, {\n    key: \"set\",\n    value: function set(key, value) {\n      this.cache.set(key, value);\n    }\n  }, {\n    key: \"remove\",\n    value: function remove(key) {\n      var removed = this.cache.remove(key);\n      removed && URL.revokeObjectURL(removed.dataURI);\n    }\n  }]);\n\n  return ObjectURLCache;\n}();\nexport var createObjectURLCache = function createObjectURLCache() {\n  return new ObjectURLCache(PREVIEW_CACHE_LRU_SIZE);\n};","import _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport { createObjectURLCache } from '../../../utils/objectURLCache';\n// Dimensions are used to create a key.\n// Cache is invalidated when different dimensions are provided.\nexport var getCacheKey = function getCacheKey(id, dimensions) {\n  return [id, dimensions.height, dimensions.width].join('-');\n};\nexport var CardPreviewCacheImpl = function CardPreviewCacheImpl(previewCache) {\n  var _this = this;\n\n  _classCallCheck(this, CardPreviewCacheImpl);\n\n  _defineProperty(this, \"get\", function (id, dimensions) {\n    var cacheKey = getCacheKey(id, dimensions);\n    return _this.previewCache.get(cacheKey);\n  });\n\n  _defineProperty(this, \"set\", function (id, dimensions, cardPreview) {\n    var cacheKey = getCacheKey(id, dimensions);\n\n    _this.previewCache.set(cacheKey, cardPreview);\n  });\n\n  _defineProperty(this, \"remove\", function (id, dimensions) {\n    var cacheKey = getCacheKey(id, dimensions);\n\n    _this.previewCache.remove(cacheKey);\n  });\n\n  this.previewCache = previewCache;\n};\nexport default new CardPreviewCacheImpl(createObjectURLCache());","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport VideoSnapshot from 'video-snapshot';\nexport var takeSnapshot = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(blob) {\n    var snapshooter, dataUri;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            snapshooter = new VideoSnapshot(blob);\n            _context.next = 3;\n            return snapshooter.takeSnapshot();\n\n          case 3:\n            dataUri = _context.sent;\n            snapshooter.end();\n            return _context.abrupt(\"return\", dataUri);\n\n          case 6:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function takeSnapshot(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport { takeSnapshot } from '../../../utils/videoSnapshot';\nimport { getMediaTypeFromMimeType } from '@atlaskit/media-common';\nimport { getOrientation } from '@atlaskit/media-ui';\nimport { LocalPreviewError, RemotePreviewError } from '../../../errors';\n\n/**\n * This method tells the support for the media\n * types covered in getCardPreviewFromFilePreview\n */\nexport var isSupportedLocalPreview = function isSupportedLocalPreview(mediaType) {\n  return mediaType === 'image' || mediaType === 'video';\n};\n\nvar getImageLocalPreview = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(value) {\n    var orientation, dataURI;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.prev = 0;\n            _context.next = 3;\n            return getOrientation(value);\n\n          case 3:\n            orientation = _context.sent;\n            dataURI = URL.createObjectURL(value);\n            return _context.abrupt(\"return\", {\n              dataURI: dataURI,\n              orientation: orientation,\n              source: 'local'\n            });\n\n          case 8:\n            _context.prev = 8;\n            _context.t0 = _context[\"catch\"](0);\n            throw new LocalPreviewError('local-preview-image', _context.t0);\n\n          case 11:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[0, 8]]);\n  }));\n\n  return function getImageLocalPreview(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar getVideoLocalPreview = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(value) {\n    var dataURI;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.prev = 0;\n            _context2.next = 3;\n            return takeSnapshot(value);\n\n          case 3:\n            dataURI = _context2.sent;\n            return _context2.abrupt(\"return\", {\n              dataURI: dataURI,\n              orientation: 1,\n              source: 'local'\n            });\n\n          case 7:\n            _context2.prev = 7;\n            _context2.t0 = _context2[\"catch\"](0);\n            throw new LocalPreviewError('local-preview-video', _context2.t0);\n\n          case 10:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2, null, [[0, 7]]);\n  }));\n\n  return function getVideoLocalPreview(_x2) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nexport var getCardPreviewFromFilePreview = /*#__PURE__*/function () {\n  var _ref3 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3(filePreview) {\n    var value, resolvedFilePreview, _value, type, mediaType;\n\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            _context3.prev = 0;\n            _context3.next = 3;\n            return filePreview;\n\n          case 3:\n            resolvedFilePreview = _context3.sent;\n            value = resolvedFilePreview.value;\n            _context3.next = 10;\n            break;\n\n          case 7:\n            _context3.prev = 7;\n            _context3.t0 = _context3[\"catch\"](0);\n            throw new LocalPreviewError('local-preview-rejected', _context3.t0);\n\n          case 10:\n            if (!(typeof value === 'string')) {\n              _context3.next = 14;\n              break;\n            }\n\n            return _context3.abrupt(\"return\", {\n              dataURI: value,\n              orientation: 1,\n              source: 'local'\n            });\n\n          case 14:\n            if (!(value instanceof Blob)) {\n              _context3.next = 22;\n              break;\n            }\n\n            _value = value, type = _value.type;\n            mediaType = getMediaTypeFromMimeType(type);\n            _context3.t1 = mediaType;\n            _context3.next = _context3.t1 === 'image' ? 20 : _context3.t1 === 'video' ? 21 : 22;\n            break;\n\n          case 20:\n            return _context3.abrupt(\"return\", getImageLocalPreview(value));\n\n          case 21:\n            return _context3.abrupt(\"return\", getVideoLocalPreview(value));\n\n          case 22:\n            throw new LocalPreviewError('local-preview-unsupported');\n\n          case 23:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3, null, [[0, 7]]);\n  }));\n\n  return function getCardPreviewFromFilePreview(_x3) {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var getCardPreviewFromBackend = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(mediaClient, id, params) {\n    var blob;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.prev = 0;\n            _context4.next = 3;\n            return mediaClient.getImage(id, params);\n\n          case 3:\n            blob = _context4.sent;\n            return _context4.abrupt(\"return\", {\n              dataURI: URL.createObjectURL(blob),\n              orientation: 1,\n              source: 'remote'\n            });\n\n          case 7:\n            _context4.prev = 7;\n            _context4.t0 = _context4[\"catch\"](0);\n            throw new RemotePreviewError('remote-preview-fetch', _context4.t0);\n\n          case 10:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4, null, [[0, 7]]);\n  }));\n\n  return function getCardPreviewFromBackend(_x4, _x5, _x6) {\n    return _ref4.apply(this, arguments);\n  };\n}();","import { isValidPercentageUnit } from './isValidPercentageUnit';\nimport { containsPixelUnit } from './containsPixelUnit';\nexport var canCompareDimension = function canCompareDimension(current, next) {\n  if (!current || !next) {\n    return false;\n  }\n\n  if (isValidPercentageUnit(current) && isValidPercentageUnit(next)) {\n    return true;\n  }\n\n  if (containsPixelUnit(\"\".concat(current)) && containsPixelUnit(\"\".concat(next))) {\n    return true;\n  }\n\n  if (typeof current === 'number' && typeof next === 'number') {\n    return true;\n  }\n\n  return false;\n};\nexport var isBigger = function isBigger(current, next) {\n  if (!!current && !!next && canCompareDimension(current.width, next.width) && canCompareDimension(current.height, next.height)) {\n    var nextIsHigher = parseInt(\"\".concat(current.width), 10) < parseInt(\"\".concat(next.width), 10);\n    var nextIsWider = parseInt(\"\".concat(current.height), 10) < parseInt(\"\".concat(next.height), 10);\n    return nextIsHigher || nextIsWider;\n  } else {\n    return false;\n  }\n};","import { isMimeTypeSupportedByBrowser } from '@atlaskit/media-common';\nimport { isPreviewableFileState, isPreviewableType, isImageRepresentationReady } from '@atlaskit/media-client';\nimport { isSupportedLocalPreview } from './helpers'; // TODO: align these checks with helpers from Media Client\n// https://product-fabric.atlassian.net/browse/BMPT-1300\n\nexport var extractFilePreviewStatus = function extractFilePreviewStatus(fileState, isBannedLocalPreview, featureFlags) {\n  var hasFilesize = 'size' in fileState && !!fileState.size;\n\n  var _ref = 'mediaType' in fileState && fileState || {},\n      mediaType = _ref.mediaType;\n\n  var _ref2 = 'mimeType' in fileState && fileState || {},\n      mimeType = _ref2.mimeType;\n\n  var isPreviewable = !!mediaType && isPreviewableType(mediaType, featureFlags); // Local preview is available only if it's supported by browser and supported by Media Card (isSupportedLocalPreview)\n  // For example, SVGs are mime type NOT supported by browser but media type supported by Media Card (image)\n  // Then, local Preview NOT available\n\n  var hasLocalPreview = !isBannedLocalPreview && isPreviewableFileState(fileState) && isSupportedLocalPreview(mediaType) && !!mimeType && isMimeTypeSupportedByBrowser(mimeType);\n  var hasRemotePreview = isImageRepresentationReady(fileState);\n  var hasPreview = hasLocalPreview || hasRemotePreview;\n  var isSupportedByBrowser = !!mimeType && isMimeTypeSupportedByBrowser(mimeType);\n  return {\n    hasFilesize: hasFilesize,\n    isPreviewable: isPreviewable,\n    hasPreview: hasPreview,\n    isSupportedByBrowser: isSupportedByBrowser\n  };\n};\nexport var isPreviewableStatus = function isPreviewableStatus(cardStatus, _ref3) {\n  var isPreviewable = _ref3.isPreviewable,\n      hasPreview = _ref3.hasPreview,\n      isSupportedByBrowser = _ref3.isSupportedByBrowser;\n  return hasPreview && isPreviewable && (cardStatus === 'complete' || cardStatus === 'loading-preview' || cardStatus === 'uploading' || // For Video, we can have local or remote preview while processing.\n  // Then, we only want to show the thumbnail if the file is supported by the browser,\n  // this way we prevent playing unsupported videos that are not procesed\n  cardStatus === 'processing' && isSupportedByBrowser);\n};","import _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { isPreviewableFileState, addFileAttrsToUrl } from '@atlaskit/media-client';\nimport { isMimeTypeSupportedByBrowser } from '@atlaskit/media-common';\nimport cardPreviewCache from './cache';\nimport { getCardPreviewFromFilePreview, getCardPreviewFromBackend } from './helpers';\nimport { MediaCardError, SsrPreviewError, isUnsupportedLocalPreviewError } from '../../../errors';\nimport { isBigger } from '../../../utils/dimensionComparer';\nimport { extractFilePreviewStatus, isPreviewableStatus } from './filePreviewStatus';\nexport { getCardPreviewFromFilePreview, getCardPreviewFromBackend, isSupportedLocalPreview } from './helpers';\nexport { extractFilePreviewStatus } from './filePreviewStatus';\nexport var getCardPreviewFromCache = cardPreviewCache.get;\nexport var removeCardPreviewFromCache = cardPreviewCache.remove;\n/**\n * Will return the preview if available and supported by the browser\n * See extractFilePreviewStatus \"hasLocalPreview\" logic\n */\n\nexport var getFilePreviewFromFileState = function getFilePreviewFromFileState(fileState) {\n  return 'mimeType' in fileState && isMimeTypeSupportedByBrowser(fileState.mimeType) && isPreviewableFileState(fileState) ? fileState.preview : undefined;\n};\n\nvar extendAndCachePreview = function extendAndCachePreview(id, dimensions, preview, mediaBlobUrlAttrs) {\n  var source;\n\n  switch (preview.source) {\n    case 'local':\n      source = 'cache-local';\n      break;\n\n    case 'remote':\n      source = 'cache-remote';\n      break;\n\n    case 'ssr-server':\n      source = 'cache-ssr-server';\n      break;\n\n    case 'ssr-client':\n      source = 'cache-ssr-client';\n      break;\n\n    default:\n      source = preview.source;\n  } // We want to embed some meta context into dataURI for Copy/Paste to work.\n\n\n  var dataURI = mediaBlobUrlAttrs ? addFileAttrsToUrl(preview.dataURI, mediaBlobUrlAttrs) : preview.dataURI; // We store new cardPreview into cache\n\n  cardPreviewCache.set(id, dimensions, _objectSpread(_objectSpread({}, preview), {}, {\n    source: source,\n    dataURI: dataURI\n  }));\n  return _objectSpread(_objectSpread({}, preview), {}, {\n    dataURI: dataURI\n  });\n};\n/**\n * This function will try to return a Card preview, either from cache, local preview or remote preview.\n * It should only be called if there is a chance to get either a remote or a local preview, or both.\n * This, in order to ensure there is always going to be a valid return value OR throw an error if the process fails.\n * It is worth noting that local preview failures break the process if there is no remote preview available.\n * In that case we throw an error immediately.\n * Otherwise, if the local preview fails but there is a remote preview available, the failure does not break the process.\n * In that case, we still want to report the local preview error to the caller, for feature realiability track.\n * hence the use of the optional callback onLocalPreviewError\n */\n\n\nexport var getCardPreview = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n    var mediaClient, id, _ref$dimensions, dimensions, filePreview, onLocalPreviewError, isRemotePreviewReady, imageUrlParams, mediaBlobUrlAttrs, cachedPreview, localPreview;\n\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            mediaClient = _ref.mediaClient, id = _ref.id, _ref$dimensions = _ref.dimensions, dimensions = _ref$dimensions === void 0 ? {} : _ref$dimensions, filePreview = _ref.filePreview, onLocalPreviewError = _ref.onLocalPreviewError, isRemotePreviewReady = _ref.isRemotePreviewReady, imageUrlParams = _ref.imageUrlParams, mediaBlobUrlAttrs = _ref.mediaBlobUrlAttrs;\n            cachedPreview = cardPreviewCache.get(id, dimensions);\n\n            if (!cachedPreview) {\n              _context.next = 4;\n              break;\n            }\n\n            return _context.abrupt(\"return\", cachedPreview);\n\n          case 4:\n            _context.prev = 4;\n\n            if (!filePreview) {\n              _context.next = 10;\n              break;\n            }\n\n            _context.next = 8;\n            return getCardPreviewFromFilePreview(filePreview);\n\n          case 8:\n            localPreview = _context.sent;\n            return _context.abrupt(\"return\", extendAndCachePreview(id, dimensions, localPreview, mediaBlobUrlAttrs));\n\n          case 10:\n            _context.next = 17;\n            break;\n\n          case 12:\n            _context.prev = 12;\n            _context.t0 = _context[\"catch\"](4);\n\n            /**\n             * We report the error if:\n             * - local preview is supported and fails\n             * - local preview is unsupported and remote preview is NOT READY\n             *   i.e. the function was called for \"no reason\".\n             * We DON'T report the error if:\n             * - local preview is unsupported and remote preview IS READY\n             *   i.e. local preview is available and not supported,\n             *   but we are after the remote preview instead.\n             */\n            if (!isUnsupportedLocalPreviewError(_context.t0) || isUnsupportedLocalPreviewError(_context.t0) && !isRemotePreviewReady) {\n              onLocalPreviewError && onLocalPreviewError(_context.t0);\n            }\n            /**\n             * No matter the reason why the local preview failed, we break the process\n             * if there is no remote preview available\n             */\n\n\n            if (isRemotePreviewReady) {\n              _context.next = 17;\n              break;\n            }\n\n            throw _context.t0;\n\n          case 17:\n            if (isRemotePreviewReady) {\n              _context.next = 19;\n              break;\n            }\n\n            throw new MediaCardError('remote-preview-not-ready');\n\n          case 19:\n            return _context.abrupt(\"return\", fetchAndCacheRemotePreview(mediaClient, id, dimensions, imageUrlParams, mediaBlobUrlAttrs));\n\n          case 20:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee, null, [[4, 12]]);\n  }));\n\n  return function getCardPreview(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nexport var shouldResolvePreview = function shouldResolvePreview(_ref3) {\n  var status = _ref3.status,\n      fileState = _ref3.fileState,\n      dimensions = _ref3.dimensions,\n      prevDimensions = _ref3.prevDimensions,\n      hasCardPreview = _ref3.hasCardPreview,\n      isBannedLocalPreview = _ref3.isBannedLocalPreview,\n      featureFlags = _ref3.featureFlags;\n  var statusIsPreviewable = isPreviewableStatus(status, extractFilePreviewStatus(fileState, isBannedLocalPreview, featureFlags));\n  var dimensionsAreBigger = isBigger(prevDimensions, dimensions);\n  return statusIsPreviewable && (!hasCardPreview || dimensionsAreBigger);\n};\nexport var getSSRCardPreview = function getSSRCardPreview(ssr, mediaClient, id, params, mediaBlobUrlAttrs) {\n  var dataURI;\n\n  try {\n    var rawDataURI = mediaClient.getImageUrlSync(id, params); // We want to embed some meta context into dataURI for Copy/Paste to work.\n\n    dataURI = mediaBlobUrlAttrs ? addFileAttrsToUrl(rawDataURI, mediaBlobUrlAttrs) : rawDataURI;\n    var source = ssr === 'client' ? 'ssr-client' : 'ssr-server';\n    return {\n      dataURI: dataURI,\n      source: source,\n      orientation: 1\n    };\n  } catch (e) {\n    var reason = ssr === 'server' ? 'ssr-server-uri' : 'ssr-client-uri';\n    throw new SsrPreviewError(reason, e);\n  }\n};\nexport var isLocalPreview = function isLocalPreview(preview) {\n  var localSources = ['local', 'cache-local'];\n  return localSources.includes(preview.source);\n};\nexport var isSSRPreview = function isSSRPreview(preview) {\n  return isSSRClientPreview(preview) || isSSRServerPreview(preview);\n};\nexport var isSSRServerPreview = function isSSRServerPreview(preview) {\n  var ssrClientSources = ['ssr-server', 'cache-ssr-server'];\n  return ssrClientSources.includes(preview.source);\n};\nexport var isSSRClientPreview = function isSSRClientPreview(preview) {\n  var ssrClientSources = ['ssr-client', 'cache-ssr-client'];\n  return ssrClientSources.includes(preview.source);\n};\nexport var fetchAndCacheRemotePreview = /*#__PURE__*/function () {\n  var _ref4 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(mediaClient, id, dimensions, params, mediaBlobUrlAttrs) {\n    var remotePreview;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return getCardPreviewFromBackend(mediaClient, id, params);\n\n          case 2:\n            remotePreview = _context2.sent;\n            return _context2.abrupt(\"return\", extendAndCachePreview(id, dimensions, remotePreview, mediaBlobUrlAttrs));\n\n          case 4:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n\n  return function fetchAndCacheRemotePreview(_x2, _x3, _x4, _x5, _x6) {\n    return _ref4.apply(this, arguments);\n  };\n}();","import { isErrorFileState, isFileIdentifier } from '@atlaskit/media-client';\n\nvar getProcessingStatusFromFileState = function getProcessingStatusFromFileState(status) {\n  switch (status) {\n    case 'processed':\n      return 'succeeded';\n\n    case 'processing':\n      return 'running';\n\n    case 'failed-processing':\n      return 'failed';\n  }\n};\n\nvar getFileDetailsFromFileState = function getFileDetailsFromFileState(state) {\n  return {\n    id: state.id,\n    name: state.name,\n    size: state.size,\n    mimeType: state.mimeType,\n    createdAt: state.createdAt,\n    mediaType: state.mediaType,\n    processingStatus: getProcessingStatusFromFileState(state.status)\n  };\n};\n\nexport var getFileDetails = function getFileDetails(identifier, fileState) {\n  return isFileIdentifier(identifier) ? fileState && !isErrorFileState(fileState) ? getFileDetailsFromFileState(fileState) : {\n    id: identifier.id\n  } : {\n    id: identifier.mediaItemType,\n    name: identifier.name || identifier.dataURI,\n    mediaType: 'image'\n  };\n};","export default (function () {\n  return document;\n});","import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { isErrorFileState } from '@atlaskit/media-client';\nimport { MediaCardError } from '../../errors';\nimport { getCardStatus, isFinalCardStatus } from './getCardStatus';\nimport { extractFilePreviewStatus } from './getCardPreview';\nexport var createStateUpdater = function createStateUpdater(newState) {\n  return function (prevState) {\n    // Only override if previous status is non-final\n    // or new status is 'complete'\n    if (isFinalCardStatus(prevState.status) && newState.status !== 'complete') {\n      return prevState;\n    }\n\n    return _objectSpread(_objectSpread({}, prevState), newState);\n  };\n};\nexport var getCardStateFromFileState = function getCardStateFromFileState(fileState, isBannedLocalPreview, featureFlags) {\n  var status = getCardStatus(fileState.status, extractFilePreviewStatus(fileState, isBannedLocalPreview, featureFlags));\n  var error = status === 'error' && isErrorFileState(fileState) ? new MediaCardError('error-file-state', new Error(fileState.message)) : undefined;\n  var progress = status === 'uploading' && fileState.status === 'uploading' ? fileState.progress : 1;\n  return {\n    fileState: fileState,\n    status: status,\n    progress: progress,\n    error: error\n  };\n};","import _toConsumableArray from \"@babel/runtime/helpers/toConsumableArray\";\nimport _regeneratorRuntime from \"@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nimport _classCallCheck from \"@babel/runtime/helpers/classCallCheck\";\nimport _createClass from \"@babel/runtime/helpers/createClass\";\nimport _assertThisInitialized from \"@babel/runtime/helpers/assertThisInitialized\";\nimport _inherits from \"@babel/runtime/helpers/inherits\";\nimport _possibleConstructorReturn from \"@babel/runtime/helpers/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime/helpers/getPrototypeOf\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) { symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); } keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\n\nimport React, { Component } from 'react';\nimport ReactDOM from 'react-dom';\nimport { version as packageVersion, name as packageName } from '../../version.json';\nimport { withAnalyticsEvents } from '@atlaskit/analytics-next';\nimport { withMediaAnalyticsContext } from '@atlaskit/media-common';\nimport DownloadIcon from '@atlaskit/icon/glyph/download';\nimport { globalMediaEventEmitter, isDifferentIdentifier, isFileIdentifier, RECENTS_COLLECTION, isImageRepresentationReady, isExternalImageIdentifier, imageResizeModeToFileImageMode } from '@atlaskit/media-client';\nimport { MediaViewer } from '@atlaskit/media-viewer';\nimport { injectIntl, IntlProvider } from 'react-intl-next';\nimport { CardView } from '../cardView';\nimport { ViewportDetector } from '../../utils/viewportDetector';\nimport { getRequestedDimensions } from '../../utils/getDataURIDimension';\nimport { getCardPreview, getCardPreviewFromCache, removeCardPreviewFromCache, getFilePreviewFromFileState, shouldResolvePreview, getSSRCardPreview, isLocalPreview, isSSRPreview, isSSRClientPreview, fetchAndCacheRemotePreview } from './getCardPreview';\nimport { getFileDetails } from '../../utils/metadata';\nimport { InlinePlayer } from '../inlinePlayer';\nimport { getFileAttributes } from '../../utils/analytics';\nimport { isLocalPreviewError, MediaCardError, ensureMediaCardError, ImageLoadError } from '../../errors';\nimport { fireOperationalEvent as _fireOperationalEvent, fireCommencedEvent as _fireCommencedEvent, relevantFeatureFlagNames, fireCopiedEvent, fireScreenEvent } from './cardAnalytics';\nimport getDocument from '../../utils/document';\nimport { getCardStateFromFileState, createStateUpdater } from './cardState';\nexport var CardBase = /*#__PURE__*/function (_Component) {\n  _inherits(CardBase, _Component);\n\n  var _super = _createSuper(CardBase);\n\n  // We initialise timeElapsedTillCommenced\n  // to avoid extra branching on a possibly undefined value.\n  function CardBase(props) {\n    var _this;\n\n    _classCallCheck(this, CardBase);\n\n    _this = _super.call(this, props);\n\n    _defineProperty(_assertThisInitialized(_this), \"hasBeenMounted\", false);\n\n    _defineProperty(_assertThisInitialized(_this), \"timeElapsedTillCommenced\", performance.now());\n\n    _defineProperty(_assertThisInitialized(_this), \"getImageURLParams\", function (_ref) {\n      var collection = _ref.collectionName;\n      return _objectSpread(_objectSpread({\n        collection: collection,\n        mode: imageResizeModeToFileImageMode(_this.props.resizeMode)\n      }, _this.requestedDimensions), {}, {\n        allowAnimated: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getMediaBlobUrlAttrs\", function (identifier, fileState) {\n      var id = identifier.id,\n          collection = identifier.collectionName;\n      var _this$props = _this.props,\n          originalDimensions = _this$props.originalDimensions,\n          contextId = _this$props.contextId,\n          alt = _this$props.alt;\n\n      var _getFileDetails = getFileDetails(identifier, fileState),\n          mimeType = _getFileDetails.mimeType,\n          name = _getFileDetails.name,\n          size = _getFileDetails.size;\n\n      return contextId ? _objectSpread(_objectSpread({\n        id: id,\n        collection: collection,\n        contextId: contextId,\n        mimeType: mimeType,\n        name: name,\n        size: size\n      }, originalDimensions || _this.requestedDimensions), {}, {\n        alt: alt\n      }) : undefined;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"getCardPreviewParams\", function (identifier, fileState) {\n      var isBannedLocalPreview = _this.state.isBannedLocalPreview;\n      var id = identifier.id;\n      var _this$props2 = _this.props,\n          _this$props2$dimensio = _this$props2.dimensions,\n          dimensions = _this$props2$dimensio === void 0 ? {} : _this$props2$dimensio,\n          mediaClient = _this$props2.mediaClient;\n      return {\n        mediaClient: mediaClient,\n        id: id,\n        dimensions: dimensions,\n        onLocalPreviewError: _this.fireLocalPreviewErrorEvent,\n        filePreview: isBannedLocalPreview ? undefined : getFilePreviewFromFileState(fileState),\n        isRemotePreviewReady: isImageRepresentationReady(fileState),\n        imageUrlParams: _this.getImageURLParams(identifier),\n        mediaBlobUrlAttrs: _this.getMediaBlobUrlAttrs(identifier, fileState)\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setCacheSSRPreview\", function (identifier) {\n      var _this$props3 = _this.props,\n          mediaClient = _this$props3.mediaClient,\n          _this$props3$dimensio = _this$props3.dimensions,\n          dimensions = _this$props3$dimensio === void 0 ? {} : _this$props3$dimensio;\n      fetchAndCacheRemotePreview(mediaClient, identifier.id, dimensions, _this.getImageURLParams(identifier), _this.getMediaBlobUrlAttrs(identifier)).catch(function () {// No need to log this error.\n        // If preview fails, it will be refetched later\n        //TODO: test this catch\n        // https://product-fabric.atlassian.net/browse/MEX-1071\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resolveSSRPreview\", function (identifier, ssr) {\n      var mediaClient = _this.props.mediaClient;\n\n      try {\n        return getSSRCardPreview(ssr, mediaClient, identifier.id, _this.getImageURLParams(identifier), _this.getMediaBlobUrlAttrs(identifier));\n      } catch (e) {// TODO: log SSR reliability 'failed'\n        // https://product-fabric.atlassian.net/browse/MEX-770\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"resolvePreview\", /*#__PURE__*/function () {\n      var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(identifier, fileState) {\n        var params, cardPreview, wrappedError;\n        return _regeneratorRuntime.wrap(function _callee$(_context) {\n          while (1) {\n            switch (_context.prev = _context.next) {\n              case 0:\n                _context.prev = 0;\n                params = _this.getCardPreviewParams(identifier, fileState);\n                _context.next = 4;\n                return getCardPreview(params);\n\n              case 4:\n                cardPreview = _context.sent;\n\n                _this.safeSetState({\n                  cardPreview: cardPreview\n                });\n\n                _context.next = 12;\n                break;\n\n              case 8:\n                _context.prev = 8;\n                _context.t0 = _context[\"catch\"](0);\n                wrappedError = ensureMediaCardError('preview-fetch', _context.t0); //  If remote preview fails, we set status 'error'\n                //  If local preview fails (i.e, no remote preview available),\n                //  we can stay in the same status until there is a remote preview available\n                //  If it's any other error we set status 'error'\n\n                if (isLocalPreviewError(wrappedError)) {\n                  _this.safeSetState({\n                    isBannedLocalPreview: true\n                  });\n                } else {\n                  _this.safeSetState({\n                    status: 'error',\n                    error: wrappedError\n                  });\n                }\n\n              case 12:\n              case \"end\":\n                return _context.stop();\n            }\n          }\n        }, _callee, null, [[0, 8]]);\n      }));\n\n      return function (_x, _x2) {\n        return _ref2.apply(this, arguments);\n      };\n    }());\n\n    _defineProperty(_assertThisInitialized(_this), \"getPerformanceAttributes\", function () {\n      var _assertThisInitialize = _assertThisInitialized(_this),\n          timeElapsedTillCommenced = _assertThisInitialize.timeElapsedTillCommenced;\n\n      var timeElapsedTillEvent = performance.now();\n      var durationSinceCommenced = timeElapsedTillCommenced && timeElapsedTillEvent - timeElapsedTillCommenced;\n      return {\n        overall: {\n          durationSincePageStart: timeElapsedTillEvent,\n          durationSinceCommenced: durationSinceCommenced\n        }\n      };\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onImageError\", function () {\n      var cardPreview = _this.state.cardPreview;\n      var error = new ImageLoadError(cardPreview === null || cardPreview === void 0 ? void 0 : cardPreview.source);\n      var isLocal = cardPreview && isLocalPreview(cardPreview);\n      var isSSR = cardPreview && isSSRClientPreview(cardPreview);\n\n      if (isLocal || isSSR) {\n        var updateState = {\n          cardPreview: undefined\n        };\n\n        if (isLocal) {\n          updateState.isBannedLocalPreview = true;\n\n          _this.fireLocalPreviewErrorEvent(error);\n        }\n\n        if (isSSR) {// TODO: set SSR-client reliability 'failed'.\n          // https://product-fabric.atlassian.net/browse/MEX-770\n        }\n\n        var _this$props4 = _this.props,\n            identifier = _this$props4.identifier,\n            _this$props4$dimensio = _this$props4.dimensions,\n            dimensions = _this$props4$dimensio === void 0 ? {} : _this$props4$dimensio;\n        isFileIdentifier(identifier) && removeCardPreviewFromCache(identifier.id, dimensions);\n\n        _this.safeSetState(updateState);\n      } else {\n        _this.safeSetState({\n          status: 'error',\n          error: error\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onImageLoad\", function () {\n      _this.safeSetState({\n        previewDidRender: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fireCopiedEvent\", function () {\n      var createAnalyticsEvent = _this.props.createAnalyticsEvent;\n      var cardRef = _this.state.cardRef;\n      cardRef && createAnalyticsEvent && fireCopiedEvent(createAnalyticsEvent, _this.metadata.id, cardRef);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fireScreenEvent\", function () {\n      var createAnalyticsEvent = _this.props.createAnalyticsEvent;\n      createAnalyticsEvent && fireScreenEvent(createAnalyticsEvent, _this.fileAttributes);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"fireLocalPreviewErrorEvent\", function (error) {// TODO: track local preview success rate\n      // https://product-fabric.atlassian.net/browse/MEX-774\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"safeSetState\", function (state) {\n      if (_this.hasBeenMounted) {\n        // If it's setting the status, we need to use a state updater function,\n        // which ensures that no non-final status overrides a final status.\n        // If no status is set, we don't need a sate updater\n        var updater = !!state.status ? createStateUpdater(state) : state;\n\n        _this.setState(updater);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"unsubscribe\", function () {\n      if (_this.subscription) {\n        _this.subscription.unsubscribe();\n      }\n\n      if (_this.hasBeenMounted) {\n        // TODO MEX-788: add test for \"do not remove the card preview when unsubscribing\".\n        _this.setState({\n          isBannedLocalPreview: false\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCardViewClick\", function (event, analyticsEvent) {\n      var _this$props5 = _this.props,\n          identifier = _this$props5.identifier,\n          useInlinePlayer = _this$props5.useInlinePlayer,\n          shouldOpenMediaViewer = _this$props5.shouldOpenMediaViewer;\n      var cardPreview = _this.state.cardPreview;\n\n      var _assertThisInitialize2 = _assertThisInitialized(_this),\n          metadata = _assertThisInitialize2.metadata;\n\n      _this.onClick(event, analyticsEvent);\n\n      if (!metadata) {\n        return;\n      }\n\n      var isVideo = metadata && metadata.mediaType === 'video';\n\n      if (useInlinePlayer && isVideo && !!cardPreview) {\n        _this.setState({\n          isPlayingFile: true\n        });\n      } else if (shouldOpenMediaViewer) {\n        var mediaViewerSelectedItem;\n\n        if (isFileIdentifier(identifier)) {\n          mediaViewerSelectedItem = {\n            id: identifier.id,\n            mediaItemType: 'file',\n            collectionName: identifier.collectionName,\n            occurrenceKey: identifier.occurrenceKey\n          };\n        } else {\n          mediaViewerSelectedItem = {\n            mediaItemType: 'external-image',\n            dataURI: identifier.dataURI,\n            name: identifier.name\n          };\n        }\n\n        _this.setState({\n          mediaViewerSelectedItem: mediaViewerSelectedItem\n        });\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onInlinePlayerError\", function () {\n      _this.setState({\n        isPlayingFile: false\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"setRef\", function (cardRef) {\n      !!cardRef && _this.setState({\n        cardRef: cardRef\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderInlinePlayer\", function () {\n      var _this$props6 = _this.props,\n          identifier = _this$props6.identifier,\n          mediaClient = _this$props6.mediaClient,\n          dimensions = _this$props6.dimensions,\n          selected = _this$props6.selected,\n          testId = _this$props6.testId,\n          originalDimensions = _this$props6.originalDimensions;\n      return /*#__PURE__*/React.createElement(InlinePlayer, {\n        mediaClient: mediaClient,\n        dimensions: dimensions,\n        originalDimensions: originalDimensions,\n        identifier: identifier,\n        onError: _this.onInlinePlayerError,\n        onClick: _this.onClick,\n        selected: selected,\n        ref: _this.setRef,\n        testId: testId\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMediaViewerClose\", function () {\n      _this.setState({\n        mediaViewerSelectedItem: undefined\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onDisplayImage\", function () {\n      var identifier = _this.props.identifier;\n      var payloadPart;\n\n      if (isFileIdentifier(identifier)) {\n        payloadPart = {\n          fileId: identifier.id,\n          isUserCollection: identifier.collectionName === RECENTS_COLLECTION\n        };\n      } else {\n        payloadPart = {\n          fileId: identifier.dataURI,\n          isUserCollection: false\n        };\n      }\n\n      globalMediaEventEmitter.emit('media-viewed', _objectSpread({\n        viewingLevel: 'minimal'\n      }, payloadPart));\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderMediaViewer\", function () {\n      var mediaViewerSelectedItem = _this.state.mediaViewerSelectedItem;\n      var _this$props7 = _this.props,\n          mediaClient = _this$props7.mediaClient,\n          identifier = _this$props7.identifier,\n          mediaViewerDataSource = _this$props7.mediaViewerDataSource,\n          contextId = _this$props7.contextId,\n          featureFlags = _this$props7.featureFlags;\n\n      if (!mediaViewerSelectedItem) {\n        return;\n      }\n\n      var collectionName = isFileIdentifier(identifier) ? identifier.collectionName || '' : '';\n      var dataSource = mediaViewerDataSource || {\n        list: []\n      };\n      return /*#__PURE__*/ReactDOM.createPortal( /*#__PURE__*/React.createElement(MediaViewer, {\n        collectionName: collectionName,\n        dataSource: dataSource,\n        mediaClientConfig: mediaClient.config,\n        selectedItem: mediaViewerSelectedItem,\n        onClose: _this.onMediaViewerClose,\n        contextId: contextId,\n        featureFlags: featureFlags\n      }), document.body);\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"renderCard\", function () {\n      var _this$props8 = _this.props,\n          identifier = _this$props8.identifier,\n          isLazy = _this$props8.isLazy,\n          appearance = _this$props8.appearance,\n          resizeMode = _this$props8.resizeMode,\n          dimensions = _this$props8.dimensions,\n          selectable = _this$props8.selectable,\n          selected = _this$props8.selected,\n          disableOverlay = _this$props8.disableOverlay,\n          alt = _this$props8.alt,\n          testId = _this$props8.testId,\n          featureFlags = _this$props8.featureFlags,\n          titleBoxBgColor = _this$props8.titleBoxBgColor,\n          titleBoxIcon = _this$props8.titleBoxIcon,\n          ssr = _this$props8.ssr;\n      var mediaItemType = identifier.mediaItemType;\n      var _this$state = _this.state,\n          status = _this$state.status,\n          progress = _this$state.progress,\n          _this$state$cardPrevi = _this$state.cardPreview;\n      _this$state$cardPrevi = _this$state$cardPrevi === void 0 ? {\n        dataURI: undefined,\n        orientation: 1\n      } : _this$state$cardPrevi;\n      var dataURI = _this$state$cardPrevi.dataURI,\n          orientation = _this$state$cardPrevi.orientation,\n          error = _this$state.error,\n          cardRef = _this$state.cardRef,\n          isCardVisible = _this$state.isCardVisible;\n\n      var _assertThisInitialize3 = _assertThisInitialized(_this),\n          metadata = _assertThisInitialize3.metadata;\n\n      var _assertThisInitialize4 = _assertThisInitialized(_this),\n          onCardViewClick = _assertThisInitialize4.onCardViewClick,\n          onDisplayImage = _assertThisInitialize4.onDisplayImage,\n          actions = _assertThisInitialize4.actions,\n          onMouseEnter = _assertThisInitialize4.onMouseEnter; // Card can be artificially turned visible before entering the viewport\n      // For example, when we have the image in cache\n\n\n      var nativeLazyLoad = isLazy && !isCardVisible; // Force Media Image to always display img for SSR\n\n      var forceSyncDisplay = !!ssr;\n      var card = /*#__PURE__*/React.createElement(CardView, {\n        status: status,\n        error: error,\n        mediaItemType: mediaItemType,\n        metadata: metadata,\n        dataURI: dataURI,\n        alt: alt,\n        appearance: appearance,\n        resizeMode: resizeMode,\n        dimensions: dimensions,\n        actions: actions,\n        selectable: selectable,\n        selected: selected,\n        onClick: onCardViewClick,\n        onMouseEnter: onMouseEnter,\n        disableOverlay: disableOverlay,\n        progress: progress,\n        onDisplayImage: onDisplayImage,\n        previewOrientation: orientation,\n        innerRef: _this.setRef,\n        testId: testId,\n        featureFlags: featureFlags,\n        titleBoxBgColor: titleBoxBgColor,\n        titleBoxIcon: titleBoxIcon,\n        onImageError: _this.onImageError,\n        onImageLoad: _this.onImageLoad,\n        nativeLazyLoad: nativeLazyLoad,\n        forceSyncDisplay: forceSyncDisplay\n      });\n      return isLazy ? /*#__PURE__*/React.createElement(ViewportDetector, {\n        targetRef: cardRef,\n        onVisible: _this.onCardInViewport\n      }, card) : card;\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onCardInViewport\", function () {\n      _this.setState({\n        isCardVisible: true\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onClick\", function (event, analyticsEvent) {\n      var onClick = _this.props.onClick;\n\n      var _assertThisInitialize5 = _assertThisInitialized(_this),\n          metadata = _assertThisInitialize5.metadata;\n\n      if (onClick) {\n        var cardEvent = {\n          event: event,\n          mediaItemDetails: metadata\n        };\n        onClick(cardEvent, analyticsEvent);\n      }\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"onMouseEnter\", function (event) {\n      var onMouseEnter = _this.props.onMouseEnter;\n\n      var _assertThisInitialize6 = _assertThisInitialized(_this),\n          metadata = _assertThisInitialize6.metadata;\n\n      if (onMouseEnter) {\n        var cardEvent = {\n          event: event,\n          mediaItemDetails: metadata\n        };\n        onMouseEnter(cardEvent);\n      }\n    });\n\n    var _status = 'loading';\n\n    var _cardPreview;\n\n    var _this$props9 = _this.props,\n        _identifier = _this$props9.identifier,\n        _this$props9$dimensio = _this$props9.dimensions,\n        _dimensions = _this$props9$dimensio === void 0 ? {} : _this$props9$dimensio,\n        _ssr = _this$props9.ssr;\n\n    if (isFileIdentifier(_identifier)) {\n      var id = _identifier.id;\n      _cardPreview = getCardPreviewFromCache(id, _dimensions);\n\n      if (!_cardPreview && _ssr) {\n        _this.fireCommencedEvent();\n\n        _cardPreview = _this.resolveSSRPreview(_identifier, _ssr);\n      }\n    } else if (isExternalImageIdentifier(_identifier)) {\n      _this.fireCommencedEvent();\n\n      _status = 'loading-preview';\n      var dataURI = _identifier.dataURI;\n      _cardPreview = {\n        dataURI: dataURI,\n        orientation: 1,\n        source: 'external'\n      };\n    } // If cardPreview is available from local cache or external, `isCardVisible`\n    // should be true to avoid flickers during re-mount of the component\n    // should not be visible for SSR preview, otherwise we'll fire the metadata fetch from\n    // outside the viewport\n\n\n    var _isCardVisible = !_this.props.isLazy || !!_cardPreview && !isSSRPreview(_cardPreview);\n\n    _this.state = {\n      status: _status,\n      isCardVisible: _isCardVisible,\n      isPlayingFile: false,\n      cardPreview: _cardPreview,\n      cardRef: null,\n      isBannedLocalPreview: false,\n      previewDidRender: false\n    };\n    return _this;\n  }\n\n  _createClass(CardBase, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      this.hasBeenMounted = true;\n      var _this$state2 = this.state,\n          isCardVisible = _this$state2.isCardVisible,\n          cardPreview = _this$state2.cardPreview;\n      var _this$props10 = this.props,\n          identifier = _this$props10.identifier,\n          ssr = _this$props10.ssr;\n\n      if (isCardVisible && isFileIdentifier(identifier)) {\n        this.updateStateForIdentifier(identifier);\n      }\n\n      if (isCardVisible && !!ssr && !!cardPreview && isSSRClientPreview(cardPreview) && isFileIdentifier(identifier)) {\n        // Since the SSR preview brings the token in the query params,\n        // We need to fetch the remote preview to be able to cache it,\n        this.setCacheSSRPreview(identifier);\n      } // we add a listener for each of the cards on the page\n      // and then check if the triggered listener is from the card\n      // that contains a div in current window.getSelection()\n      // won't work in IE11\n\n\n      getDocument().addEventListener('copy', this.fireCopiedEvent);\n    }\n  }, {\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps, prevState) {\n      var prevMediaClient = prevProps.mediaClient,\n          prevIdentifier = prevProps.identifier,\n          prevDimensions = prevProps.dimensions;\n      var prevIsCardVisible = prevState.isCardVisible;\n      var _this$props11 = this.props,\n          mediaClient = _this$props11.mediaClient,\n          identifier = _this$props11.identifier,\n          dimensions = _this$props11.dimensions,\n          featureFlags = _this$props11.featureFlags;\n      var _this$state3 = this.state,\n          isCardVisible = _this$state3.isCardVisible,\n          cardPreview = _this$state3.cardPreview,\n          status = _this$state3.status,\n          fileState = _this$state3.fileState,\n          isBannedLocalPreview = _this$state3.isBannedLocalPreview,\n          previewDidRender = _this$state3.previewDidRender;\n      var isDifferent = isDifferentIdentifier(prevIdentifier, identifier);\n      var turnedVisible = !prevIsCardVisible && isCardVisible;\n      var isNewMediaClient = prevMediaClient !== mediaClient;\n\n      if (isExternalImageIdentifier(identifier) && isDifferent) {\n        this.fireCommencedEvent();\n        var dataURI = identifier.dataURI;\n        this.setState({\n          status: 'loading-preview',\n          cardPreview: {\n            dataURI: dataURI,\n            orientation: 1,\n            source: 'external'\n          },\n          isCardVisible: true\n        });\n      }\n\n      if (isFileIdentifier(identifier) && (turnedVisible || !!this.subscription && (isNewMediaClient || isDifferent))) {\n        this.updateStateForIdentifier(identifier);\n      }\n\n      if (this.state.status !== prevState.status) {\n        this.fireOperationalEvent();\n\n        if (this.state.status === 'complete' || this.fileAttributes.fileMediatype === 'video' && !!cardPreview && this.state.status === 'processing') {\n          this.fireScreenEvent();\n        }\n      }\n\n      if (isFileIdentifier(identifier) && fileState && shouldResolvePreview({\n        status: status,\n        fileState: fileState,\n        dimensions: dimensions,\n        prevDimensions: prevDimensions,\n        featureFlags: featureFlags,\n        hasCardPreview: !!cardPreview,\n        isBannedLocalPreview: isBannedLocalPreview\n      })) {\n        this.resolvePreview(identifier, fileState);\n      }\n\n      if (turnedVisible && this.props.ssr && !!cardPreview && isSSRClientPreview(cardPreview) && isFileIdentifier(identifier)) {\n        // Since the SSR preview brings the token in the query params,\n        // We need to fetch the remote preview to be able to cache it,\n        this.setCacheSSRPreview(identifier);\n      }\n\n      if (previewDidRender && // We should't complete if status is uploading\n      ['loading-preview', 'processing'].includes(status)) {\n        this.safeSetState({\n          status: 'complete'\n        });\n        this.unsubscribe();\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      this.hasBeenMounted = false;\n      this.unsubscribe();\n      getDocument().removeEventListener('copy', this.fireCopiedEvent);\n    }\n  }, {\n    key: \"updateStateForIdentifier\",\n    value: function updateStateForIdentifier(identifier) {\n      this.fireCommencedEvent();\n      this.subscribeInternalFile(identifier);\n    }\n  }, {\n    key: \"subscribeInternalFile\",\n    value: function subscribeInternalFile(identifier) {\n      var _this2 = this;\n\n      var mediaClient = this.props.mediaClient;\n      var isBannedLocalPreview = this.state.isBannedLocalPreview;\n      var id = identifier.id,\n          collectionName = identifier.collectionName,\n          occurrenceKey = identifier.occurrenceKey;\n      this.unsubscribe();\n      this.subscription = mediaClient.file.getFileState(id, {\n        collectionName: collectionName,\n        occurrenceKey: occurrenceKey\n      }).subscribe({\n        next: function next(fileState) {\n          var featureFlags = _this2.props.featureFlags;\n          var newState = getCardStateFromFileState(fileState, isBannedLocalPreview, featureFlags);\n\n          _this2.safeSetState(newState);\n        },\n        error: function error(e) {\n          var errorReason = _this2.state.status === 'uploading' ? 'upload' : 'metadata-fetch';\n          var error = new MediaCardError(errorReason, e);\n\n          _this2.safeSetState({\n            error: error,\n            status: 'error'\n          });\n        }\n      });\n    }\n  }, {\n    key: \"requestedDimensions\",\n    get: function get() {\n      var dimensions = this.props.dimensions;\n\n      var _ref3 = this.state || {},\n          element = _ref3.cardRef;\n\n      return getRequestedDimensions({\n        dimensions: dimensions,\n        element: element\n      });\n    }\n  }, {\n    key: \"metadata\",\n    get: function get() {\n      var _this$state4;\n\n      return getFileDetails(this.props.identifier, (_this$state4 = this.state) === null || _this$state4 === void 0 ? void 0 : _this$state4.fileState);\n    }\n  }, {\n    key: \"fileAttributes\",\n    get: function get() {\n      var _this$state5, _this$state5$fileStat;\n\n      return getFileAttributes(this.metadata, (_this$state5 = this.state) === null || _this$state5 === void 0 ? void 0 : (_this$state5$fileStat = _this$state5.fileState) === null || _this$state5$fileStat === void 0 ? void 0 : _this$state5$fileStat.status);\n    }\n  }, {\n    key: \"fireOperationalEvent\",\n    value: function fireOperationalEvent() {\n      var _this$state6 = this.state,\n          status = _this$state6.status,\n          error = _this$state6.error;\n      var createAnalyticsEvent = this.props.createAnalyticsEvent;\n      createAnalyticsEvent && _fireOperationalEvent(createAnalyticsEvent, status, this.fileAttributes, this.getPerformanceAttributes(), error);\n    }\n  }, {\n    key: \"fireCommencedEvent\",\n    value: function fireCommencedEvent() {\n      this.timeElapsedTillCommenced = performance.now();\n      var createAnalyticsEvent = this.props.createAnalyticsEvent;\n      createAnalyticsEvent && _fireCommencedEvent(createAnalyticsEvent, this.fileAttributes, {\n        overall: {\n          durationSincePageStart: this.timeElapsedTillCommenced\n        }\n      });\n    }\n  }, {\n    key: \"actions\",\n    get: function get() {\n      var _this3 = this;\n\n      var _this$props12 = this.props,\n          _this$props12$actions = _this$props12.actions,\n          actions = _this$props12$actions === void 0 ? [] : _this$props12$actions,\n          identifier = _this$props12.identifier,\n          shouldEnableDownloadButton = _this$props12.shouldEnableDownloadButton;\n      var status = this.state.status;\n      var metadata = this.metadata;\n\n      if (isFileIdentifier(identifier) && (status === 'failed-processing' || shouldEnableDownloadButton)) {\n        var downloadAction = {\n          label: 'Download',\n          icon: /*#__PURE__*/React.createElement(DownloadIcon, {\n            label: \"Download\"\n          }),\n          handler: function handler() {\n            return _this3.props.mediaClient.file.downloadBinary(identifier.id, metadata.name, identifier.collectionName);\n          }\n        };\n        return [downloadAction].concat(_toConsumableArray(actions));\n      } else {\n        return actions;\n      }\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this$state7 = this.state,\n          isPlayingFile = _this$state7.isPlayingFile,\n          mediaViewerSelectedItem = _this$state7.mediaViewerSelectedItem;\n      var innerContent = /*#__PURE__*/React.createElement(React.Fragment, null, isPlayingFile ? this.renderInlinePlayer() : this.renderCard(), mediaViewerSelectedItem ? this.renderMediaViewer() : null);\n      return this.props.intl ? innerContent : /*#__PURE__*/React.createElement(IntlProvider, {\n        locale: \"en\"\n      }, innerContent);\n    }\n  }]);\n\n  return CardBase;\n}(Component);\n\n_defineProperty(CardBase, \"defaultProps\", {\n  appearance: 'auto',\n  resizeMode: 'crop',\n  isLazy: true,\n  disableOverlay: false,\n  // Media Feature Flag defaults are defined in @atlaskit/media-common\n  featureFlags: {}\n});\n\nexport var Card = withMediaAnalyticsContext({\n  packageVersion: packageVersion,\n  packageName: packageName,\n  componentName: 'mediaCard',\n  component: 'mediaCard'\n}, {\n  filterFeatureFlags: relevantFeatureFlagNames\n})(withAnalyticsEvents()(injectIntl(CardBase, {\n  enforceContext: false\n})));","import { fireMediaCardEvent, getRenderSucceededEventPayload, getRenderErrorEventPayload, getRenderFailedFileStatusPayload, getCopiedFilePayload, getRenderCommencedEventPayload, getRenderPreviewableCardPayload } from '../../utils/analytics';\nexport var relevantFeatureFlagNames = ['newCardExperience', 'captions'];\nexport var fireOperationalEvent = function fireOperationalEvent(createAnalyticsEvent, status, fileAttributes, performanceAttributes, error) {\n  var fireEvent = function fireEvent(payload) {\n    return fireMediaCardEvent(payload, createAnalyticsEvent);\n  };\n\n  switch (status) {\n    case 'complete':\n      fireEvent(getRenderSucceededEventPayload(fileAttributes, performanceAttributes));\n      break;\n\n    case 'failed-processing':\n      fireEvent(getRenderFailedFileStatusPayload(fileAttributes, performanceAttributes));\n      break;\n\n    case 'error':\n      error && fireEvent(getRenderErrorEventPayload(fileAttributes, performanceAttributes, error));\n      break;\n  }\n};\nexport var fireCommencedEvent = function fireCommencedEvent(createAnalyticsEvent, fileAttributes, performanceAttributes) {\n  fireMediaCardEvent(getRenderCommencedEventPayload(fileAttributes, performanceAttributes), createAnalyticsEvent);\n};\nexport var fireCopiedEvent = function fireCopiedEvent(createAnalyticsEvent, fileId, cardRef) {\n  if (typeof window.getSelection === 'function') {\n    var _selection$containsNo;\n\n    var selection = window.getSelection();\n\n    if (selection !== null && selection !== void 0 && (_selection$containsNo = selection.containsNode) !== null && _selection$containsNo !== void 0 && _selection$containsNo.call(selection, cardRef, true)) {\n      fireMediaCardEvent(getCopiedFilePayload(fileId), createAnalyticsEvent);\n    }\n  }\n};\nexport var fireScreenEvent = function fireScreenEvent(createAnalyticsEvent, fileAttributes) {\n  fireMediaCardEvent(getRenderPreviewableCardPayload(fileAttributes), createAnalyticsEvent);\n};","export var isFinalCardStatus = function isFinalCardStatus(status) {\n  return ['complete', 'error', 'failed-processing'].includes(status);\n};\nexport var getCardStatus = function getCardStatus(fileStatus, _ref) {\n  var hasFilesize = _ref.hasFilesize,\n      isPreviewable = _ref.isPreviewable,\n      hasPreview = _ref.hasPreview;\n\n  switch (fileStatus) {\n    case 'uploading':\n    case 'failed-processing':\n    case 'error':\n      return fileStatus;\n\n    case 'processing':\n      // Legacy empty files logic\n      // isPreviewable will most likely be false for empty files,\n      // therefore we need to do this cut before that check.\n      // TODO: https://product-fabric.atlassian.net/browse/BMPT-1247\n      if (!hasFilesize) {\n        return 'processing';\n      } // If we show no preview for this file\n      // we won't show the \"creating preview\" message, i.e. Card is \"complete\".\n\n\n      if (!isPreviewable) {\n        return 'complete';\n      }\n\n      return 'processing';\n\n    case 'processed':\n      if (!isPreviewable || !hasPreview) {\n        return 'complete';\n      }\n\n      return 'loading-preview';\n\n    default:\n      return 'loading';\n  }\n};","(function (root, factory) {\n  if (typeof define === \"function\" && define.amd) {\n    define([], factory);\n  } else if (typeof module === \"object\" && module.exports) {\n    module.exports = factory();\n  } else {\n    root.Scrollparent = factory();\n  }\n}(this, function () {\n  var regex = /(auto|scroll)/;\n\n  var parents = function (node, ps) {\n    if (node.parentNode === null) { return ps; }\n\n    return parents(node.parentNode, ps.concat([node]));\n  };\n\n  var style = function (node, prop) {\n    return getComputedStyle(node, null).getPropertyValue(prop);\n  };\n\n  var overflow = function (node) {\n    return style(node, \"overflow\") + style(node, \"overflow-y\") + style(node, \"overflow-x\");\n  };\n\n  var scroll = function (node) {\n   return regex.test(overflow(node));\n  };\n\n  var scrollParent = function (node) {\n    if (!(node instanceof HTMLElement || node instanceof SVGElement)) {\n      return ;\n    }\n\n    var ps = parents(node.parentNode, []);\n\n    for (var i = 0; i < ps.length; i += 1) {\n      if (scroll(ps[i])) {\n        return ps[i];\n      }\n    }\n\n    return document.scrollingElement || document.documentElement;\n  };\n\n  return scrollParent;\n}));\n"],"names":["exports","obj","_react","__esModule","default","_base","LockFilledIcon","props","createElement","Icon","Object","assign","dangerouslySetGlyph","displayName","_default","isValidPercentageUnit","value","valueString","concat","length","isNaN","slice","getElementDimension","element","dimension","dimensionValue","getBoundingClientRect","Math","round","ownKeys","object","enumerableOnly","keys","getOwnPropertySymbols","symbols","filter","sym","getOwnPropertyDescriptor","enumerable","push","apply","_objectSpread","target","i","arguments","source","forEach","key","getOwnPropertyDescriptors","defineProperties","defineProperty","attachDetailsToActions","actions","details","map","action","handler","type","_templateObject","getErrorMessage","status","messages","tickBoxClassName","tickboxFixedStyles","N0","N100","Wrapper","className","_ref","selected","B200","getSelectedStyles","blanketClassName","fixedBlanketStyles","N90A","Blanket","isFixed","_templateObject2","actionsBarClassName","fixedActionBarStyles","playButtonClassName","bkgClassName","fixedPlayButtonStyles","_responsiveSettings","Breakpoint","Background","responsiveSettings","SMALL","fontSize","lineHeight","titleBox","verticalPadding","horizontalPadding","LARGE","getTitleBoxHeight","breakpoint","breakpointSizes","Infinity","getWrapperDimensions","dimensions","appearance","_ref5","width","height","_getDefaultCardDimens","defaultWidth","defaultHeight","getCSSUnitValue","g","NewFileExperienceWrapper","_ref6","shouldUsePointerCursor","disableOverlay","displayBackground","isPlayButtonClickable","isTickBoxSelectable","shouldDisplayTooltip","N20","getCursorStyle","withOverlayShadow","N60A","shadow","Boolean","join","getWrapperShadow","undefined","setting","generateResponsiveStyles","getClickablePlayButtonStyles","getSelectableTickBoxStyles","_templateObject3","_templateObject4","_templateObject5","CardImageContainer","ImageRenderer","dataURI","previewOrientation","alt","resizeMode","onImageLoad","onImageError","onDisplayImage","mediaType","nativeLazyLoad","forceSyncDisplay","useEffect","loading","crop","stretch","resizeModeToMediaImageProps","HEX_REGEX","TitleBoxWrapper","titleBoxBgColor","test","infoStyles","iconOverlapStyles","TitleBoxHeader","_ref2","hasIconOverlap","TitleBoxFooter","_ref3","TitleBoxIcon","ErrorMessageWrapper","truncateCommonStyles","TruncateLeft","fontSizePX","endFixedChars","fontFaceScaleFactor","startFixedChars","TruncateRight","Truncate","_ref4","text","_ref4$fontSizePX","_ref4$startFixedChars","_ref4$endFixedChars","_calculateTruncation","minAllowedLength","left","right","splitAt","substr","calculateTruncation","leftStr","rightStr","FormattedDate","injectIntl","timestamp","_ref2$locale","intl","locale","formatDate","TitleBox","name","createdAt","titleBoxIcon","label","size","FailedTitleBox","_ref$customMessage","customMessage","primaryColor","R300","smallSizeSettings","marginBottom","largeSizeSettings","StyledBar","progress","positionBottom","N400","multiplier","marginPositionBottom","ProgressBar","_ref$breakpoint","_ref$positionBottom","normalizedProgress","min","max","PlayButton","TickBox","ActionsBar","_React$Component","Derived","hasNativeReflectConstruct","_super","Reflect","construct","sham","Proxy","prototype","valueOf","call","e","_isNativeReflectConstruct","result","Super","NewTarget","this","constructor","_this$props","variant","IconWrapper","hasTitleBox","titleBoxHeight","breatheAnimation","animatedStyles","IconMessageWrapper","animated","reducedFont","N300","IconMessage","messageDescriptor","_ref$animated","_ref$reducedFont","CreatingPreview","disableAnimation","PreviewUnavailable","FailedToLoad","FailedToUpload","PreviewCurrentlyUnavailable","CardViewBase","_this","_len","args","Array","_key","didImageRender","setState","divRef","current","elementWidth","onClick","onMouseEnter","testId","metadata","selectable","shouldDisplayBackground","shouldRenderPlayButton","innerRef","Tooltip","content","position","tag","renderNewExperienceCard","_this$props2","mediaItemType","mimeType","actionsWithDetails","errorMessage","fileSize","error","mediaName","_this$props3","state","isZeroSize","defaultConfig","renderTypeIcon","renderImageRenderer","renderPlayButton","renderBlanket","renderTitleBox","renderTickBox","isFixedBlanket","renderProgressBar","iconMessage","customTitleMessage","baseErrorConfig","secondaryError","renderFailedTitleBox","renderSpinner","_this$getRenderConfig","getRenderConfigByStatus","_this$props4","renderMediaTypeIcon","renderActionsBar","saveElementWidth","prevDataURI","get","wrapperWidth","find","limit","calcBreakpointSize","parseInt","featureFlags","renderFileNewExperience","_this$props5","wrapperDimensions","breakpointSize","renderFile","_this$props6","_this$props7","_ref9","_this$props8","_this$props8$metadata","_this$props8$metadata2","_ref10","_this$props9","CardView","withAnalyticsEvents","eventType","actionSubject","attributes","rect","window","pageXOffset","top","pageYOffset","bottom","_defineProperty","configurable","writable","_typeof","Symbol","iterator","elementBounds","viewportBounds","offset","offsetTop","offsetRight","offsetBottom","offsetLeft","supported","opts","addEventListener","removeEventListener","isPassiveListenerSupported","passive","_classCallCheck","instance","Constructor","TypeError","_defineProperties","descriptor","_possibleConstructorReturn","self","_assertThisInitialized","_getPrototypeOf","o","setPrototypeOf","getPrototypeOf","__proto__","ReferenceError","_setPrototypeOf","p","LazilyRender","_getPrototypeOf2","hasBeenScrolledIntoView","cancelAnimationFrame","raf","requestAnimationFrame","getElementBounds","getViewportBounds","offsetBounds","getOffsetBounds","isElementInViewport","stopListening","container","onRender","scrollContainer","getContainer","protoProps","subClass","superClass","create","_inherits","document","scrollingElement","documentElement","compatMode","body","innerHeight","innerWidth","bounds","offsetHeight","offsetWidth","convertOffsetToBounds","prevProps","prevState","_this2","prevContainer","nextContainer","startListening","update","eventListenerOptions","placeholder","children","component","ref","handleMount","renderChildren","LazyContent","_arrayLikeToArray","arr","len","arr2","isIntersectionObserverSupported","Observer","onVisible","targetRef","intersectionObserver","IntersectionObserver","entries","observer","_step","_iterator","allowArrayLike","it","isArray","minLen","n","toString","from","_unsupportedIterableToArray","F","s","done","_e","f","err","normalCompletion","didErr","step","next","_e2","return","_createForOfIteratorHelper","isIntersecting","disconnect","createIntersectionObserverCallback","observe","ViewportDetector","containsPixelUnit","getDataURIDimension","options","retinaFactor","devicePixelRatio","matchMedia","matches","ExtendedLRUCache","_LRUCache","eventEmitter","EventEmitter2","entry","emit","event","callback","on","LRUCache","getCacheKey","id","CardPreviewCacheImpl","previewCache","cacheKey","cardPreview","set","remove","ObjectURLCache","cache","URL","revokeObjectURL","removed","takeSnapshot","_callee","blob","snapshooter","dataUri","_context","prev","sent","end","abrupt","stop","_x","getImageLocalPreview","orientation","createObjectURL","t0","getVideoLocalPreview","_callee2","_context2","_x2","getCardPreviewFromFilePreview","_callee3","filePreview","resolvedFilePreview","_context3","Blob","t1","_x3","getCardPreviewFromBackend","_callee4","mediaClient","params","_context4","getImage","_x4","_x5","_x6","canCompareDimension","extractFilePreviewStatus","fileState","isBannedLocalPreview","hasFilesize","isPreviewable","hasLocalPreview","isSupportedLocalPreview","isMimeTypeSupportedByBrowser","hasRemotePreview","hasPreview","isSupportedByBrowser","getCardPreviewFromCache","removeCardPreviewFromCache","getFilePreviewFromFileState","preview","extendAndCachePreview","mediaBlobUrlAttrs","getCardPreview","_ref$dimensions","onLocalPreviewError","isRemotePreviewReady","imageUrlParams","cachedPreview","localPreview","fetchAndCacheRemotePreview","isSSRClientPreview","includes","remotePreview","getProcessingStatusFromFileState","getFileDetails","identifier","processingStatus","CardBase","_Component","performance","now","collection","collectionName","mode","imageResizeModeToFileImageMode","requestedDimensions","allowAnimated","originalDimensions","contextId","_getFileDetails","_this$props2$dimensio","fireLocalPreviewErrorEvent","getImageURLParams","getMediaBlobUrlAttrs","_this$props3$dimensio","catch","ssr","rawDataURI","getImageUrlSync","reason","getSSRCardPreview","wrappedError","getCardPreviewParams","safeSetState","timeElapsedTillCommenced","timeElapsedTillEvent","overall","durationSincePageStart","durationSinceCommenced","isLocal","isSSR","updateState","_this$props4$dimensio","previewDidRender","createAnalyticsEvent","cardRef","fileId","getSelection","_selection$containsNo","selection","containsNode","fireCopiedEvent","fileAttributes","fireScreenEvent","hasBeenMounted","updater","newState","subscription","unsubscribe","analyticsEvent","useInlinePlayer","shouldOpenMediaViewer","isVideo","isPlayingFile","mediaViewerSelectedItem","occurrenceKey","onError","onInlinePlayerError","setRef","payloadPart","isUserCollection","globalMediaEventEmitter","viewingLevel","mediaViewerDataSource","dataSource","list","mediaClientConfig","config","selectedItem","onClose","onMediaViewerClose","isLazy","_this$state","_this$state$cardPrevi","isCardVisible","_assertThisInitialize4","onCardViewClick","card","onCardInViewport","mediaItemDetails","_cardPreview","_status","_identifier","_this$props9$dimensio","_dimensions","_ssr","fireCommencedEvent","resolveSSRPreview","_isCardVisible","isSSRServerPreview","_this$state2","_this$props10","updateStateForIdentifier","setCacheSSRPreview","prevMediaClient","prevIdentifier","prevDimensions","prevIsCardVisible","_this$props11","_this$state3","isDifferent","turnedVisible","isNewMediaClient","fireOperationalEvent","fileMediatype","hasCardPreview","statusIsPreviewable","cardStatus","isPreviewableStatus","dimensionsAreBigger","nextIsHigher","nextIsWider","isBigger","shouldResolvePreview","resolvePreview","subscribeInternalFile","file","getFileState","subscribe","fileStatus","getCardStatus","Error","message","getCardStateFromFileState","errorReason","_this$state4","_this$state5","_this$state5$fileStat","_this$state6","performanceAttributes","fireEvent","payload","getPerformanceAttributes","_this3","_this$props12","_this$props12$actions","shouldEnableDownloadButton","icon","downloadBinary","_this$state7","innerContent","renderInlinePlayer","renderCard","renderMediaViewer","Component","Card","withMediaAnalyticsContext","packageVersion","packageName","componentName","filterFeatureFlags","enforceContext","regex","parents","node","ps","parentNode","style","prop","getComputedStyle","getPropertyValue","scroll","overflow","HTMLElement","SVGElement"],"sourceRoot":""}