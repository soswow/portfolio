(self.webpackChunkwebsite=self.webpackChunkwebsite||[]).push([[926],{52963:(e,t,n)=>{"use strict";t.Z=void 0;var r,i=(r=n(67294))&&r.__esModule?r:{default:r},a=n(95107);const o=e=>i.default.createElement(a.Icon,Object.assign({dangerouslySetGlyph:'<svg width="24" height="24" viewBox="0 0 24 24" role="presentation"><path fill="currentColor" fill-rule="evenodd" d="M8 10V8.002A4.004 4.004 0 0112 4a4 4 0 014 4.002V10a2 2 0 012 2v6c0 1.105-.902 2-2.009 2H8.01A2 2 0 016 18v-6c0-1.102.897-1.995 2-2zm2 0h4V8.002A2.001 2.001 0 0012 6c-1.102 0-2 .898-2 2.002V10zm2 7a2 2 0 100-4 2 2 0 000 4z"/></svg>'},e));o.displayName="LockFilledIcon";var c=o;t.Z=c},80338:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Card:()=>qn,CardBase:()=>Xn});var r=n(42982),i=n(87757),a=n.n(i),o=n(15861),c=n(15671),s=n(43144),l=n(97326),u=n(60136),d=n(82963),p=n(61120),f=n(4942),m=n(67294),v=n(73935);const h=JSON.parse('{"u2":"@atlaskit/media-card","i8":"73.0.0"}');var g=n(87958),y=n(67469),b=n(42074),w=n(93742),Z=n(20431),E=n(71954),P=n(73582),x=n(67365),k=n(20484),I=n(38590),O=n(26799),S=n(42843),B=n(79023),R=n(70531),C=n(2941),L=function(e){var t="".concat(e);return"%"===t[t.length-1]&&!isNaN(+t.slice(0,-1))},j=n(90824),T=function(e,t){var n=e.getBoundingClientRect()[t];return Math.round(n)},U=n(17918),M=n(69695);function D(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function F(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?D(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):D(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function N(e,t){return e.map((function(e){return F(F({},e),{},{handler:function(){e.handler({type:"file",details:t})}})}))}var A,z,V=n(59500),_=n(97133),W=function(e){return"error"===e&&m.createElement(V.Z,_.s.failed_to_load)},J=n(75141),H=n(30168),X=n(70885),q=n(71893),G=n(51198),Y=n(89415),K=n(877),$=n(10556),Q=n(51189),ee=n(9257),te="media-card-tickbox",ne="\n  background-color: ".concat(K.N0,";\n  color: ").concat(K.N100,";\n"),re=q.ZP.div.attrs({className:te})(A||(A=(0,H.Z)(["\n  ","\n"])),(function(e){var t=e.selected;return"\n    ".concat((0,ee.eR)(),'\n    font-size: 14px;\n    width: 14px;\n    height: 14px;\n    position: absolute;\n    top: 7px;\n    left: 7px;\n    border-radius: 20px;\n    color: transparent;\n\n    /* Enforce dimensions and position of "tick" icon */\n    span {\n      display: block;\n      svg {\n        height: 14px;\n      }\n    }\n    ').concat(function(e){return e?"\n      background-color: ".concat(K.B200,";\n      color: white;\n    "):""}(t),"\n  ")}));re.displayName="TickBoxWrapper";var ie,ae="media-card-blanket",oe="\n  background-color: ".concat(K.N90A,";\n"),ce=q.ZP.div.attrs({className:ae})(z||(z=(0,H.Z)(["\n  ","\n"])),(function(e){var t=e.isFixed;return"\n    ".concat((0,ee.eR)(),"\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    max-height: 100%;\n    max-width: 100%;\n    left: 0;\n    top: 0;\n    ").concat(t?oe:"","\n  ")}));ce.displayName="Blanket";var se,le,ue="media-card-actions-bar",de="\n  opacity: 1;\n",pe=q.ZP.div.attrs({className:ue})(ie||(ie=(0,H.Z)(["\n  ","\n"])),(function(e){var t=e.isFixed;return"\n    ".concat(t?de:"opacity: 0;","\n    ").concat((0,ee.eR)(),"\n    position: absolute;\n    top: 8px;\n    right: 8px;\n    display: flex;\n    flex-flow: row nowrap;\n    align-items: center;\n  ")}));pe.displayName="ActionsBarWrapper";var fe="media-card-play-button",me="play-icon-background",ve="\n  .".concat(me," {\n    width: ").concat(56,"px;\n    height: ").concat(56,"px;\n  }\n"),he=q.ZP.div.attrs({className:fe})(se||(se=(0,H.Z)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  color: ",";\n  span {\n    position: absolute;\n  }\n"])),K.N0);he.displayName="PlayButtonWrapper";var ge,ye,be=q.ZP.div.attrs({className:me})(le||(le=(0,H.Z)(["\n  transition-property: width, height;\n  transition-duration: 0.1s;\n  position: absolute;\n  width: ","px;\n  height: ","px;\n  background: ",";\n  border-radius: 100%;\n"])),48,48,K.N90A);be.displayName="PlayButtonBackground",function(e){e.SMALL="small",e.LARGE="large"}(ye||(ye={}));var we,Ze,Ee=(ge={},(0,f.Z)(ge,ye.SMALL,{fontSize:11,lineHeight:14,titleBox:{verticalPadding:4,horizontalPadding:8}}),(0,f.Z)(ge,ye.LARGE,{fontSize:14,lineHeight:22,titleBox:{verticalPadding:8,horizontalPadding:12}}),ge),Pe=function(e){return 2*(Ee[e].lineHeight+Ee[e].titleBox.verticalPadding)},xe=[[ye.SMALL,599],[ye.LARGE,1/0]],ke=function(e,t){var n=e||{},r=n.width,i=n.height,a=(0,C.$0)(t),o=a.width,c=a.height;return"\n    width: ".concat((0,j.g)(r||o),";\n    max-width: 100%;\n    height: ").concat((0,j.g)(i||c),";\n    max-height: 100%;\n  ")},Ie=q.ZP.div(we||(we=(0,H.Z)(["\n  ","\n"])),(function(e){var t=e.breakpoint,n=e.dimensions,r=e.appearance,i=e.shouldUsePointerCursor,a=e.disableOverlay,o=e.displayBackground,c=e.selected,s=e.isPlayButtonClickable,l=e.isTickBoxSelectable,u=e.shouldDisplayTooltip;return"\n    ".concat((0,ee.eR)(),"\n    box-sizing: border-box;\n    * {\n      box-sizing: border-box;\n    }\n    position: relative;\n    font-family: ").concat((0,G.I8)(),";\n    ").concat(ke(n,r),"\n    ").concat(o?"background-color: ".concat(K.N20,";"):"","\n    ").concat(Y.E0,"\n    ").concat(function(e){return"cursor: ".concat(e?"pointer":"default",";")}(i),"\n    ").concat(function(e,t){var n=e?"":"0 1px 1px ".concat(K.N60A,", 0 0 1px 0 ").concat(K.N60A),r=[t?$.qR:"",n].filter(Boolean).join(", ");return r?"box-shadow: ".concat(r,";"):""}(a,c),"\n    ").concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye.SMALL,t=Ee[e];return"\n    font-size: ".concat(t.fontSize,"px;\n    line-height: ").concat(t.lineHeight,"px;\n  ")}(t),"\n    ").concat(Q.G,"\n\n    /* We use classnames from here exceptionally to be able to handle styles when the Card is on hover */\n    ").concat(function(e){return e?"\n    &:hover .".concat(fe," {\n      ").concat(ve,"\n    }\n  "):""}(s),"\n    ").concat(function(e){return e?"\n    &:hover .".concat(te," {\n      ").concat(ne,"\n    }\n  "):""}(l),"\n    &:hover .").concat(ae," {\n      ").concat(oe,"\n    }\n\n    &:hover .").concat(ue," {\n      ").concat(de,"\n    }\n\n    /* Tooltip does not support percentage dimensions. We enforce them here */\n    ").concat(u?"> div { ".concat(ke(n,r)," }"):"","\n")}));Ie.displayName="NewFileExperienceWrapper";var Oe,Se,Be,Re,Ce,Le=q.ZP.div(Ze||(Ze=(0,H.Z)(["\n  display: flex;\n  position: relative;\n  max-width: 100%;\n  width: 100%;\n  height: 100%;\n  max-height: 100%;\n  overflow: hidden;\n  ","\n"])),Y.E0),je=n(87462),Te=n(83734),Ue=function(e){var t=e.dataURI,n=e.previewOrientation,r=e.alt,i=e.resizeMode,a=e.onImageLoad,o=e.onImageError,c=e.onDisplayImage,s=e.mediaType,l=e.nativeLazyLoad,u=e.forceSyncDisplay;return(0,m.useEffect)((function(){"image"===s&&c&&c()}),[s,c]),m.createElement(Te.j,(0,je.Z)({dataURI:t,alt:r,previewOrientation:n,onImageLoad:a,onImageError:o,loading:l?"lazy":void 0,forceSyncDisplay:u},function(e){return{crop:"crop"===e,stretch:"stretchy-fit"===e}}(i)))},Me=n(52963),De=/^#[0-9A-F]{6}$/i,Fe=q.ZP.div(Oe||(Oe=(0,H.Z)(["\n  ","\n"])),(function(e){var t=e.breakpoint,n=e.titleBoxBgColor;return"\n    position: absolute;\n    bottom: 0;\n    width: 100%;\n    background-color: ".concat((0,ee.m4)(n&&De.test(n)?n:K.N0,.8),";\n    color: inherit;\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    ").concat(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ye.SMALL,t=Ee[e],n=t.titleBox.verticalPadding,r=t.titleBox.horizontalPadding,i=Pe(e);return"\n    height: ".concat(i,"px;\n    padding: ").concat(n,"px ").concat(r,"px;\n  ")}(t),"\n  ")}));Fe.displayName="TitleBoxWrapper";var Ne="\n  white-space: nowrap;\n  overflow: hidden;\n",Ae="\n  padding-right: 10px;\n",ze=q.ZP.div(Se||(Se=(0,H.Z)(["\n  ","\n"])),(function(e){var t=e.hasIconOverlap;return"\n    font-weight: 600;\n    ".concat(Ne,"\n    ").concat(t&&Ae,"\n  ")}));ze.displayName="FailedTitleBoxHeader";var Ve=q.ZP.div(Be||(Be=(0,H.Z)(["\n  ","\n"])),(function(e){var t=e.hasIconOverlap;return"\n    text-overflow: ellipsis;\n    ".concat(Ne,"\n    ").concat(t&&Ae,"\n  ")}));Ve.displayName="TitleBoxFooter";var _e=q.ZP.div(Re||(Re=(0,H.Z)(["\n  position: absolute;\n  right: 4px;\n  bottom: 0px;\n"])));_e.displayName="TitleBoxIcon";var We,Je,He,Xe=q.ZP.div(Ce||(Ce=(0,H.Z)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-start;\n  span {\n    vertical-align: middle;\n    :nth-child(2) {\n      margin-left: 4px;\n      margin-right: 4px;\n    }\n  }\n"]))),qe="\n  display: inline-block;\n  vertical-align: bottom;\n  white-space: nowrap;\n  overflow: hidden;\n",Ge=q.ZP.span(We||(We=(0,H.Z)(["\n  ","\n  max-width: calc(100% - ","em);\n  min-width: ",";\n  text-overflow: ellipsis;\n"])),qe,(function(e){var t=e.fontSizePX,n=e.endFixedChars;return Ke(t)*n+1}),(function(e){var t=e.fontSizePX,n=e.startFixedChars;return Ke(t)*n})),Ye=q.ZP.span(Je||(Je=(0,H.Z)(["\n  ","\n  max-width: calc(100% - ",");\n  position: relative;\n"])),qe,(function(e){var t=e.fontSizePX,n=e.startFixedChars;return Ke(t)*n})),Ke=function(e){return e/11*.46},$e=function(e){var t=e.text,n=e.fontSizePX,r=void 0===n?11:n,i=e.startFixedChars,a=void 0===i?4:i,o=e.endFixedChars,c=void 0===o?7:o,s=function(e,t,n){var r=n+t;if(e.length<=r)return{left:e,right:e};var i=e.length-n;return{left:e.substr(0,i),right:e.substr(i)}}(t,a,c),l=s.left,u=s.right;return l===u?m.createElement(m.Fragment,null,t):m.createElement(m.Fragment,null,m.createElement(Ge,{fontSizePX:r,startFixedChars:a,endFixedChars:c},l),m.createElement(Ye,{fontSizePX:r,startFixedChars:a,endFixedChars:c},u))},Qe=n(72e3),et=(0,O.ZP)((function(e){var t=e.timestamp,n=(e.intl||{locale:"en"}).locale,r=void 0===n?"en":n;return m.createElement(m.Fragment,null,(0,Qe.p6)(t,r))})),tt=function(e){var t=e.name,n=e.createdAt,r=e.breakpoint,i=e.titleBoxBgColor,a=e.titleBoxIcon;return m.createElement(Fe,{breakpoint:r,titleBoxBgColor:i},m.createElement(ze,{hasIconOverlap:!!a&&!n},m.createElement($e,{text:t})),n?m.createElement(Ve,{hasIconOverlap:!!a},m.createElement(et,{timestamp:n})):null,"LockFilledIcon"===a&&m.createElement(_e,null,m.createElement(Me.Z,{label:"",size:"small"})))},nt=n(23853),rt=function(e){var t=e.breakpoint,n=e.customMessage,r=void 0===n?_.s.failed_to_load:n;return m.createElement(Fe,{breakpoint:t},m.createElement(Xe,null,m.createElement(nt.Z,{label:"Warning",size:"small",primaryColor:K.R300}),m.createElement(U.y0,null,m.createElement(V.Z,r))))},it={marginBottom:4},at={marginBottom:12},ot=q.ZP.div(He||(He=(0,H.Z)(["\n  ","\n"])),(function(e){var t=e.progress,n=e.breakpoint,r=e.positionBottom;return"\n    ".concat(Y.E0,"\n    overflow: hidden;\n    position: absolute;\n    width: ").concat(95,"%;\n    left: ").concat(2.5,"%;\n    background-color: ").concat((0,ee.m4)(K.N0,.8),";\n    height: ").concat(5,"px;\n    padding: ").concat(1,"px;\n\n    ::before {\n      content: '';\n      width: ").concat(t,"%;\n      height: 100%;\n      background-color: ").concat(K.N400,";\n      ").concat(Y.E0,"\n      display: block;\n    }\n\n    ").concat(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=e===ye.SMALL?it:at,i=Ee[e].titleBox.verticalPadding,a=r.marginBottom*n+(t?i:Pe(e));return"\n    bottom: ".concat(a,"px\n  ")}(n,r),"\n")}));ot.displayName="StyledProgressBar";var ct=function(e){var t=e.progress,n=e.breakpoint,r=void 0===n?ye.SMALL:n,i=e.positionBottom,a=void 0!==i&&i,o=100*Math.min(1,Math.max(0,t||0));return m.createElement(ot,{progress:o,breakpoint:r,positionBottom:a})},st=n(41269),lt=function(){return m.createElement(he,null,m.createElement(be,null),m.createElement(st.Z,{label:"play",size:"large"}))},ut=n(46116),dt=function(e){var t=e.selected;return m.createElement(re,{selected:t},m.createElement(ut.Z,{label:"tick"}))},pt=n(69610),ft=n(31153);var mt,vt=function(e){(0,u.Z)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,p.Z)(t);if(n){var i=(0,p.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,d.Z)(this,e)});function i(){return(0,c.Z)(this,i),r.apply(this,arguments)}return(0,s.Z)(i,[{key:"render",value:function(){var e=this.props,t=e.isFixed,n=e.actions;return 0===n.length?null:m.createElement(pe,{isFixed:t},m.createElement(pt.L,{actions:n,variant:ft.AM.filled}))}}]),i}(m.Component),ht=n(51546),gt=q.ZP.div(mt||(mt=(0,H.Z)(["\n  ","\n"])),(function(e){var t=e.hasTitleBox,n=e.breakpoint;return"\n    position: absolute;\n    width: 100%;\n    height: calc(100% - ".concat(function(e,t){if(!e)return"0px";var n=Pe(t);return"".concat(n,"px")}(t,n),");\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n")}));gt.displayName="MediaIconWrapper";var yt,bt,wt=n(28286),Zt=n(2218),Et=(0,q.F4)(yt||(yt=(0,H.Z)(["\n 0% { opacity: 1}\n 50% { opacity: 0.3 }\n 100% { opacity: 1; }"]))),Pt="\n  animation-name: ".concat(Et,";\n  animation-duration: 3.5s;\n  animation-timing-function: ease-in-out;\n  animation-iteration-count: infinite;\n"),xt=q.ZP.div(bt||(bt=(0,H.Z)(["\n  ","\n"])),(function(e){var t=e.animated,n=e.reducedFont;return"\n    overflow: hidden;\n    opacity: 1;\n    font-weight: 450;\n    ".concat(n?"font-size: 0.7em;":"","\n    color: ").concat(K.N300,";\n    text-align:center;\n    ").concat(t?Pt:"","\n    margin-bottom: -1em;\n    padding: 3px 10px;\n")}));xt.displayName="IconMessageWrapper";var kt=function(e){var t=e.messageDescriptor,n=e.animated,r=void 0!==n&&n,i=e.reducedFont,a=void 0!==i&&i;return m.createElement(xt,{animated:r,reducedFont:a},m.createElement(U.y0,null,m.createElement(V.Z,t)))},It=function(e){var t=e.disableAnimation;return m.createElement(kt,{messageDescriptor:_.s.creating_preview,animated:!t})},Ot=function(e){return m.createElement(kt,(0,je.Z)({},e,{messageDescriptor:_.s.preview_unavailable}))},St=function(e){return m.createElement(kt,(0,je.Z)({},e,{messageDescriptor:_.s.failed_to_load}))},Bt=function(e){return m.createElement(kt,(0,je.Z)({},e,{messageDescriptor:_.s.failed_to_upload}))},Rt=function(e){return m.createElement(kt,(0,je.Z)({},e,{messageDescriptor:_.s.preview_currently_unavailable,reducedFont:!0}))},Ct=n(63030),Lt=n(76724),jt=n(7256),Tt=n(44960);function Ut(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Mt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ut(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dt=function(e){(0,u.Z)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,p.Z)(t);if(n){var i=(0,p.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,d.Z)(this,e)});function i(){var e;(0,c.Z)(this,i);for(var t=arguments.length,n=new Array(t),a=0;a<t;a++)n[a]=arguments[a];return e=r.call.apply(r,[this].concat(n)),(0,f.Z)((0,l.Z)(e),"state",{didImageRender:!1}),(0,f.Z)((0,l.Z)(e),"divRef",m.createRef()),(0,f.Z)((0,l.Z)(e),"onImageLoad",(function(){var t=e.props.onImageLoad;e.setState({didImageRender:!0}),t&&t()})),(0,f.Z)((0,l.Z)(e),"onImageError",(function(){var t=e.props.onImageError;e.setState({didImageRender:!1}),t&&t()})),(0,f.Z)((0,l.Z)(e),"saveElementWidth",(function(){var t=e.props.dimensions;if(t){var n=t.width;if(n&&L(n)&&e.divRef.current){var r=T(e.divRef.current,"width");e.setState({elementWidth:r})}}})),(0,f.Z)((0,l.Z)(e),"renderFileNewExperience",(function(){var t=e.props,n=t.dimensions,r=t.appearance,i=t.onClick,a=t.onMouseEnter,o=t.testId,c=t.metadata,s=t.status,l=t.selected,u=t.selectable,d=t.disableOverlay,p=t.dataURI,f=(c||{}).name,v="error"!==s&&"failed-processing"!==s,h=!p||!d||"error"===s||"failed-processing"===s,g=!(!e.shouldRenderPlayButton()||!d),y=!d&&!!u&&!l,b=!d;return m.createElement(Ie,{className:jt.A,"data-testid":o||"media-card-view",dimensions:n,appearance:r,onClick:i,onMouseEnter:a,innerRef:e.divRef,breakpoint:e.breakpoint,shouldUsePointerCursor:v,disableOverlay:!!d,selected:!!l,displayBackground:h,isPlayButtonClickable:g,isTickBoxSelectable:y,shouldDisplayTooltip:b},b?m.createElement(ht.Z,{content:f,position:"bottom",tag:"div"},e.renderNewExperienceCard()):e.renderNewExperienceCard())})),(0,f.Z)((0,l.Z)(e),"renderFile",(function(){var t=e.props,n=t.status,r=t.mediaItemType,i=t.metadata,a=t.dataURI,o=t.progress,c=t.resizeMode,s=t.dimensions,l=t.selectable,u=t.selected,d=t.disableOverlay,p=t.previewOrientation,f=t.alt,v=t.onDisplayImage,h=t.actions,g=i||{},y=g.name,b=g.mediaType,w=g.mimeType,Z=g.size,E=i&&h?N(h,i):[],P=W(n),x=Z?(0,J.n)(Z):"";return m.createElement(B.EV,{error:P,dimensions:s,selectable:l,selected:u,dataURI:a,mediaName:y,mediaType:b,mimeType:w,fileSize:x,status:n,mediaItemType:r,progress:o,resizeMode:c,onDisplayImage:v,actions:E,disableOverlay:d,previewOrientation:p,alt:f,onImageLoad:e.onImageLoad,onImageError:e.onImageError})})),(0,f.Z)((0,l.Z)(e),"getRenderConfigByStatus",(function(){var t=e.props,n=t.dataURI,r=t.status,i=t.metadata,a=t.disableOverlay,o=t.error,c=t.selectable,s=t.disableAnimation,l=i||{},u=l.name,d=l.mediaType,p=e.state.didImageRender,f=!(!i||0!==i.size),v={renderTypeIcon:!p,renderImageRenderer:!!n,renderPlayButton:!!n&&"video"===d,renderBlanket:!a,renderTitleBox:!a&&!!u,renderTickBox:!a&&!!c};switch(r){case"uploading":return Mt(Mt({},v),{},{renderBlanket:!a||"video"!==d,isFixedBlanket:!0,renderProgressBar:!0});case"processing":case"loading-preview":return Mt(Mt({},v),{},{iconMessage:p||f?void 0:m.createElement(It,{disableAnimation:s})});case"complete":return v;case"error":case"failed-processing":var h,g,y=Mt(Mt({},v),{},{renderTypeIcon:!0,renderImageRenderer:!1,renderTitleBox:!1,renderPlayButton:!1}),b=(o||{}).secondaryError;if((0,Ct.no)(b)||(0,Lt.C)(b)?h=m.createElement(Rt,null):(0,Tt.dG)(o)?(h=m.createElement(Bt,null),g=_.s.failed_to_upload):h=i?m.createElement(Ot,null):m.createElement(St,null),!a){var w=!u||!!g;return Mt(Mt({},y),{},{renderTitleBox:!!u&&!g,renderFailedTitleBox:w,iconMessage:w?void 0:h,customTitleMessage:g})}return Mt(Mt({},y),{},{iconMessage:h});default:return Mt(Mt({},v),{},{renderPlayButton:!1,renderTypeIcon:!1,renderSpinner:!p})}})),(0,f.Z)((0,l.Z)(e),"renderNewExperienceCard",(function(){var t=e.getRenderConfigByStatus(),n=t.renderTypeIcon,r=t.iconMessage,i=t.renderImageRenderer,a=t.renderSpinner,o=t.renderPlayButton,c=t.renderBlanket,s=t.renderProgressBar,l=t.renderTitleBox,u=t.renderFailedTitleBox,d=t.renderTickBox,p=t.isFixedBlanket,f=t.customTitleMessage,v=e.props,h=v.progress,g=v.selected,y=v.status,b=(v.metadata||{}).name,w=!!l||!!u;return m.createElement(m.Fragment,null,m.createElement(Le,{className:"media-file-card-view","data-testid":"media-file-card-view","data-test-media-name":b,"data-test-status":y,"data-test-progress":h,"data-test-selected":!!g||void 0},n&&e.renderMediaTypeIcon(w,r),a&&e.renderSpinner(w),i&&e.renderImageRenderer(),o&&e.renderPlayButton(w),c&&e.renderBlanket(!!p),l&&e.renderTitleBox(),u&&e.renderFailedTitleBox(f),s&&e.renderProgressBar(!w),d&&e.renderTickBox()),e.renderActionsBar())})),e}return(0,s.Z)(i,[{key:"componentDidMount",value:function(){this.saveElementWidth();var e=this.props.innerRef;e&&this.divRef.current&&e(this.divRef.current)}},{key:"componentDidUpdate",value:function(e){var t=e.dataURI,n=this.props.dataURI;t&&!n&&this.setState({didImageRender:!1})}},{key:"width",get:function(){var e=this.state.elementWidth;if(e)return e;var t=(this.props.dimensions||{width:void 0}).width;return t?(0,j.g)(t):C.tN.width}},{key:"breakpoint",get:function(){var e=this.state.elementWidth||(this.props.dimensions?this.props.dimensions.width:"")||C.tN.width;return function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=xe.find((function(t){var n=(0,X.Z)(t,2),r=(n[0],n[1]);return e<=r}))||[ye.SMALL];return(0,X.Z)(t,1)[0]}(parseInt("".concat(e),10))}},{key:"render",value:function(){var e=this.props.featureFlags;if((0,S.OC)("newCardExperience",e))return this.renderFileNewExperience();var t=this.props,n=t.dimensions,r=t.appearance,i=t.onClick,a=t.onMouseEnter,o=t.testId,c=n||(0,C.$0)(r);return m.createElement(U.im,{"data-testid":o||"media-card-view",shouldUsePointerCursor:!0,breakpointSize:(0,R.M0)(this.width),dimensions:c,onClick:i,onMouseEnter:a,innerRef:this.divRef},this.renderFile())}},{key:"renderSpinner",value:function(e){return m.createElement(gt,{breakpoint:this.breakpoint,hasTitleBox:e},m.createElement(Zt.Z,null))}},{key:"shouldRenderPlayButton",value:function(){var e=this.props,t=e.metadata,n=e.dataURI;return!("video"!==(t||{}).mediaType||!n)}},{key:"renderPlayButton",value:function(e){return m.createElement(gt,{breakpoint:this.breakpoint,hasTitleBox:e},m.createElement(lt,null),";")}},{key:"renderBlanket",value:function(e){return m.createElement(ce,{isFixed:e})}},{key:"renderTitleBox",value:function(){var e=this.props,t=e.metadata,n=e.titleBoxBgColor,r=e.titleBoxIcon,i=t||{},a=i.name,o=i.createdAt;return!!a&&m.createElement(tt,{name:a,createdAt:o,breakpoint:this.breakpoint,titleBoxIcon:r,titleBoxBgColor:n})}},{key:"renderFailedTitleBox",value:function(e){return m.createElement(rt,{breakpoint:this.breakpoint,customMessage:e})}},{key:"renderProgressBar",value:function(e){var t=this.props.progress;return m.createElement(ct,{progress:t,breakpoint:this.breakpoint,positionBottom:e})}},{key:"renderImageRenderer",value:function(){var e=this.props,t=e.dataURI,n=e.metadata,r=(n=void 0===n?{}:n).mediaType,i=void 0===r?"unknown":r,a=e.previewOrientation,o=e.alt,c=e.resizeMode,s=e.onDisplayImage,l=e.nativeLazyLoad,u=e.forceSyncDisplay;return!!t&&m.createElement(Ue,{dataURI:t,mediaType:i,previewOrientation:a,alt:o,resizeMode:c,onDisplayImage:s,onImageLoad:this.onImageLoad,onImageError:this.onImageError,nativeLazyLoad:l,forceSyncDisplay:u})}},{key:"renderTickBox",value:function(){var e=this.props.selected;return m.createElement(dt,{selected:e})}},{key:"renderMediaTypeIcon",value:function(e,t){var n=this.props.metadata||{},r=n.mediaType,i=n.mimeType,a=n.name;return m.createElement(gt,{breakpoint:this.breakpoint,hasTitleBox:e},m.createElement(wt.q,{testId:"media-card-file-type-icon",mediaType:r,mimeType:i,name:a}),t)}},{key:"renderActionsBar",value:function(){var e=this.props,t=e.disableOverlay,n=e.actions,r=e.metadata,i=r&&n?N(n,r):[];return t||!n||0===n.length?null:m.createElement(vt,{actions:i})}}]),i}(m.Component);(0,f.Z)(Dt,"defaultProps",{appearance:"auto"});var Ft=(0,g.Z)({onClick:(0,M.Jo)({eventType:"ui",action:"clicked",actionSubject:"mediaCard",attributes:{}})})(Dt),Nt=n(27274),At=n.n(Nt);function zt(e){if(e){var t=e.getBoundingClientRect();return{left:window.pageXOffset+t.left,right:window.pageXOffset+t.left+t.width,top:window.pageYOffset+t.top,bottom:window.pageYOffset+t.top+t.height}}}function Vt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e){return _t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_t(e)}function Wt(e,t,n){var r=n&&n.top||0,i=n&&n.right||0,a=n&&n.bottom||0,o=n&&n.left||0;return e.bottom+a>=t.top&&e.top-r<=t.bottom&&e.right+i>=t.left&&e.left-o<=t.right}const Jt=function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t),window.removeEventListener("test",null,t)}catch(e){}return e}()?{passive:!0}:void 0;function Ht(e){return Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Ht(e)}function Xt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function qt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Gt(e,t){return!t||"object"!==Ht(t)&&"function"!=typeof t?Kt(e):t}function Yt(e){return Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},Yt(e)}function Kt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $t(e,t){return $t=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},$t(e,t)}function Qt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var en,tn=function(e){function t(){var e,n;Xt(this,t);for(var r=arguments.length,i=new Array(r),a=0;a<r;a++)i[a]=arguments[a];return Qt(Kt(n=Gt(this,(e=Yt(t)).call.apply(e,[this].concat(i)))),"raf",void 0),Qt(Kt(n),"element",void 0),Qt(Kt(n),"container",void 0),Qt(Kt(n),"state",{hasBeenScrolledIntoView:!1}),Qt(Kt(n),"update",(function(){cancelAnimationFrame(n.raf),n.raf=requestAnimationFrame((function(){var e=n.getElementBounds(),t=n.getViewportBounds(),r=n.getOffsetBounds();e&&t&&Wt(e,t,r)&&(n.stopListening(n.container),n.setState({hasBeenScrolledIntoView:!0},(function(){var e=n.props.onRender;e&&e()})))}))})),Qt(Kt(n),"handleMount",(function(e){var t=n.props.scrollContainer;n.element=e,n.container=n.getContainer(t)})),n}var n,r;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&$t(e,t)}(t,e),n=t,(r=[{key:"getContainer",value:function(e){if(e)return e;if(this.element){var t=At()(this.element);return t===document.scrollingElement||t===document.documentElement||"BackCompat"!==document.compatMode&&t==document.body?window:t}}},{key:"getViewportBounds",value:function(){return function(e){if(e){if(e===window)return{top:window.pageYOffset,left:window.pageXOffset,bottom:window.pageYOffset+window.innerHeight,right:window.pageXOffset+window.innerWidth};var t=zt(e);return t?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){Vt(e,t,n[t])}))}return e}({},t,{bottom:t.top+e.offsetHeight,right:t.left+e.offsetWidth}):void 0}}(this.container)}},{key:"getElementBounds",value:function(){return zt(this.element)}},{key:"getOffsetBounds",value:function(){return function(e){var t,n,r,i;if(e)return"object"===_t(e)?(t=e.top||0,n=e.right||0,r=e.bottom||0,i=e.left||0):(t=e||0,n=e||0,r=e||0,i=e||0),{top:t,right:n,bottom:r,left:i}}(this.props.offset)}},{key:"componentDidUpdate",value:function(e,t){var n=this,r=e.scrollContainer,i=this.props.scrollContainer;r!==i&&(t.hasBeenScrolledIntoView||this.stopListening(r),this.container=this.getContainer(i),this.startListening(this.container),this.setState({hasBeenScrolledIntoView:!1},(function(){n.update()})))}},{key:"startListening",value:function(e){e&&e.addEventListener("scroll",this.update,Jt),window.addEventListener("resize",this.update)}},{key:"stopListening",value:function(e){e&&e.removeEventListener("scroll",this.update,Jt),window.removeEventListener("resize",this.update)}},{key:"componentDidMount",value:function(){this.update(),this.startListening(this.container)}},{key:"componentWillUnmount",value:function(){this.stopListening(this.container)}},{key:"renderChildren",value:function(){var e=this.props,t=e.placeholder,n=e.content,r=e.children,i=this.state.hasBeenScrolledIntoView;return!i&&t?t:i&&n?n:r?r(i):null}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.component;return m.createElement(n||"div",{ref:this.handleMount,className:t,children:this.renderChildren()})}}])&&qt(n.prototype,r),t}(m.Component),nn=(0,q.ZP)(tn)(en||(en=(0,H.Z)(["\n  ",";\n"])),(0,Y.dp)());var rn=function(e){(0,u.Z)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,p.Z)(t);if(n){var i=(0,p.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,d.Z)(this,e)});function i(){return(0,c.Z)(this,i),r.apply(this,arguments)}return(0,s.Z)(i,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.placeholder,r=e.onRender;return m.createElement(nn,{offset:300,onRender:r,placeholder:n,content:t})}}]),i}(m.Component);function an(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var on,cn=function(e){var t=e.onVisible,n=e.children,r=e.targetRef;return(0,m.useEffect)((function(){var e=new IntersectionObserver(function(e){return function(t,n){var r,i=function(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return an(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?an(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){c=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(c)throw a}}}}(t);try{for(i.s();!(r=i.n()).done;)if(r.value.isIntersecting){e(),n.disconnect();break}}catch(e){i.e(e)}finally{i.f()}}}(t));return r&&e.observe(r),function(){e.disconnect()}}),[r,t]),m.createElement(m.Fragment,null,n)},sn=(on="undefined"!=typeof IntersectionObserver,function(e){var t=e.children,n=e.targetRef,r=e.onVisible;return on?m.createElement(cn,{targetRef:n,onVisible:r},t):m.createElement(rn,{placeholder:m.createElement(m.Fragment,null,t),onRender:r},t)}),ln=function(e){return"px"===e.substr(-2)&&!isNaN(+e.slice(0,-2))},un=function(e,t){var n=window.devicePixelRatio>1||window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5), (min--moz-device-pixel-ratio: 1.5), (-o-min-device-pixel-ratio: 3/2), (min-resolution: 1.5dppx)").matches?2:1,r=t.dimensions&&t.dimensions[e]||"";return L(r)&&t.element?T(t.element,e)*n:"number"==typeof r?r*n:ln("".concat(r))?parseInt("".concat(r),10)*n:C.tN[e]*n},dn=n(36461),pn=n(31458),fn=n(11752),mn=n(36297),vn=n(56387);var hn=function(e){(0,u.Z)(i,e);var t,n,r=(t=i,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,p.Z)(t);if(n){var i=(0,p.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,d.Z)(this,e)});function i(e){var t;return(0,c.Z)(this,i),(t=r.call(this,e)).eventEmitter=new vn.EventEmitter2,t}return(0,s.Z)(i,[{key:"shift",value:function(){var e=(0,fn.Z)((0,p.Z)(i.prototype),"shift",this).call(this);return this.eventEmitter.emit("shift",e),e}},{key:"on",value:function(e,t){this.eventEmitter.on(e,t)}}]),i}(mn.LRUCache),gn=function(e,t){return[e,t.height,t.width].join("-")};const yn=new function e(t){var n=this;(0,c.Z)(this,e),(0,f.Z)(this,"get",(function(e,t){var r=gn(e,t);return n.previewCache.get(r)})),(0,f.Z)(this,"set",(function(e,t,r){var i=gn(e,t);n.previewCache.set(i,r)})),(0,f.Z)(this,"remove",(function(e,t){var r=gn(e,t);n.previewCache.remove(r)})),this.previewCache=t}(new(function(){function e(t){(0,c.Z)(this,e),this.cache=new hn(t),this.cache.on("shift",(function(e){e&&e.value.dataURI&&URL.revokeObjectURL(e.value.dataURI)}))}return(0,s.Z)(e,[{key:"has",value:function(e){return!!this.cache.find(e)}},{key:"get",value:function(e){return this.cache.get(e)}},{key:"set",value:function(e,t){this.cache.set(e,t)}},{key:"remove",value:function(e){var t=this.cache.remove(e);t&&URL.revokeObjectURL(t.dataURI)}}]),e}())(50));var bn=n(3481),wn=function(){var e=(0,o.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=new bn.Z(t),e.next=3,n.takeSnapshot();case 3:return r=e.sent,n.end(),e.abrupt("return",r);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zn=n(8227),En=n(38779),Pn=function(){var e=(0,o.Z)(a().mark((function e(t){var n,r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,(0,En.T8)(t);case 3:return n=e.sent,r=URL.createObjectURL(t),e.abrupt("return",{dataURI:r,orientation:n,source:"local"});case 8:throw e.prev=8,e.t0=e.catch(0),new Tt.go("local-preview-image",e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),xn=function(){var e=(0,o.Z)(a().mark((function e(t){var n;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,wn(t);case 3:return n=e.sent,e.abrupt("return",{dataURI:n,orientation:1,source:"local"});case 7:throw e.prev=7,e.t0=e.catch(0),new Tt.go("local-preview-video",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),kn=function(){var e=(0,o.Z)(a().mark((function e(t){var n,r,i,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t;case 3:r=e.sent,n=r.value,e.next=10;break;case 7:throw e.prev=7,e.t0=e.catch(0),new Tt.go("local-preview-rejected",e.t0);case 10:if("string"!=typeof n){e.next=14;break}return e.abrupt("return",{dataURI:n,orientation:1,source:"local"});case 14:if(!(n instanceof Blob)){e.next=22;break}i=n.type,o=(0,Zn.L4)(i),e.t1=o,e.next="image"===e.t1?20:"video"===e.t1?21:22;break;case 20:return e.abrupt("return",Pn(n));case 21:return e.abrupt("return",xn(n));case 22:throw new Tt.go("local-preview-unsupported");case 23:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),In=function(){var e=(0,o.Z)(a().mark((function e(t,n,r){var i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.getImage(n,r);case 3:return i=e.sent,e.abrupt("return",{dataURI:URL.createObjectURL(i),orientation:1,source:"remote"});case 7:throw e.prev=7,e.t0=e.catch(0),new Tt.Jj("remote-preview-fetch",e.t0);case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n,r){return e.apply(this,arguments)}}(),On=function(e,t){return!!(e&&t&&(L(e)&&L(t)||ln("".concat(e))&&ln("".concat(t))||"number"==typeof e&&"number"==typeof t))},Sn=n(36134),Bn=function(e,t,n){var r="size"in e&&!!e.size,i=("mediaType"in e&&e||{}).mediaType,a=("mimeType"in e&&e||{}).mimeType,o=!!i&&(0,Sn.d)(i,n),c=!t&&(0,Z.jL)(e)&&function(e){return"image"===e||"video"===e}(i)&&!!a&&(0,pn.PU)(a),s=(0,Z.mo)(e);return{hasFilesize:r,isPreviewable:o,hasPreview:c||s,isSupportedByBrowser:!!a&&(0,pn.PU)(a)}};function Rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Cn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Rn(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ln=yn.get,jn=yn.remove,Tn=function(e){return"mimeType"in e&&(0,pn.PU)(e.mimeType)&&(0,Z.jL)(e)?e.preview:void 0},Un=function(e,t,n,r){var i;switch(n.source){case"local":i="cache-local";break;case"remote":i="cache-remote";break;case"ssr-server":i="cache-ssr-server";break;case"ssr-client":i="cache-ssr-client";break;default:i=n.source}var a=r?(0,dn.NI)(n.dataURI,r):n.dataURI;return yn.set(e,t,Cn(Cn({},n),{},{source:i,dataURI:a})),Cn(Cn({},n),{},{dataURI:a})},Mn=function(){var e=(0,o.Z)(a().mark((function e(t){var n,r,i,o,c,s,l,u,d,p,f;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.mediaClient,r=t.id,i=t.dimensions,o=void 0===i?{}:i,c=t.filePreview,s=t.onLocalPreviewError,l=t.isRemotePreviewReady,u=t.imageUrlParams,d=t.mediaBlobUrlAttrs,!(p=yn.get(r,o))){e.next=4;break}return e.abrupt("return",p);case 4:if(e.prev=4,!c){e.next=10;break}return e.next=8,kn(c);case 8:return f=e.sent,e.abrupt("return",Un(r,o,f,d));case 10:e.next=17;break;case 12:if(e.prev=12,e.t0=e.catch(4),(!(0,Tt.G4)(e.t0)||(0,Tt.G4)(e.t0)&&!l)&&s&&s(e.t0),l){e.next=17;break}throw e.t0;case 17:if(l){e.next=19;break}throw new Tt.Rq("remote-preview-not-ready");case 19:return e.abrupt("return",Fn(n,r,o,u,d));case 20:case"end":return e.stop()}}),e,null,[[4,12]])})));return function(t){return e.apply(this,arguments)}}(),Dn=function(e){return["ssr-client","cache-ssr-client"].includes(e.source)},Fn=function(){var e=(0,o.Z)(a().mark((function e(t,n,r,i,o){var c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,In(t,n,i);case 2:return c=e.sent,e.abrupt("return",Un(n,r,c,o));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,i,a){return e.apply(this,arguments)}}(),Nn=function(e){switch(e){case"processed":return"succeeded";case"processing":return"running";case"failed-processing":return"failed"}},An=function(e,t){return(0,E.J3)(e)?t&&!(0,Z.f6)(t)?{id:(n=t).id,name:n.name,size:n.size,mimeType:n.mimeType,createdAt:n.createdAt,mediaType:n.mediaType,processingStatus:Nn(n.status)}:{id:e.id}:{id:e.mediaItemType,name:e.name||e.dataURI,mediaType:"image"};var n},zn=n(37021);const Vn=function(){return document};function _n(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_n(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_n(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Jn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Hn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Jn(Object(n),!0).forEach((function(t){(0,f.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Jn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Xn=function(e){(0,u.Z)(h,e);var t,n,i=(t=h,n=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,r=(0,p.Z)(t);if(n){var i=(0,p.Z)(this).constructor;e=Reflect.construct(r,arguments,i)}else e=r.apply(this,arguments);return(0,d.Z)(this,e)});function h(e){var t;(0,c.Z)(this,h),t=i.call(this,e),(0,f.Z)((0,l.Z)(t),"hasBeenMounted",!1),(0,f.Z)((0,l.Z)(t),"timeElapsedTillCommenced",performance.now()),(0,f.Z)((0,l.Z)(t),"getImageURLParams",(function(e){return Hn(Hn({collection:e.collectionName,mode:(0,w.b)(t.props.resizeMode)},t.requestedDimensions),{},{allowAnimated:!0})})),(0,f.Z)((0,l.Z)(t),"getMediaBlobUrlAttrs",(function(e,n){var r=e.id,i=e.collectionName,a=t.props,o=a.originalDimensions,c=a.contextId,s=a.alt,l=An(e,n),u=l.mimeType,d=l.name,p=l.size;return c?Hn(Hn({id:r,collection:i,contextId:c,mimeType:u,name:d,size:p},o||t.requestedDimensions),{},{alt:s}):void 0})),(0,f.Z)((0,l.Z)(t),"getCardPreviewParams",(function(e,n){var r=t.state.isBannedLocalPreview,i=e.id,a=t.props,o=a.dimensions,c=void 0===o?{}:o;return{mediaClient:a.mediaClient,id:i,dimensions:c,onLocalPreviewError:t.fireLocalPreviewErrorEvent,filePreview:r?void 0:Tn(n),isRemotePreviewReady:(0,Z.mo)(n),imageUrlParams:t.getImageURLParams(e),mediaBlobUrlAttrs:t.getMediaBlobUrlAttrs(e,n)}})),(0,f.Z)((0,l.Z)(t),"setCacheSSRPreview",(function(e){var n=t.props,r=n.mediaClient,i=n.dimensions,a=void 0===i?{}:i;Fn(r,e.id,a,t.getImageURLParams(e),t.getMediaBlobUrlAttrs(e)).catch((function(){}))})),(0,f.Z)((0,l.Z)(t),"resolveSSRPreview",(function(e,n){var r=t.props.mediaClient;try{return function(e,t,n,r,i){try{var a=t.getImageUrlSync(n,r);return{dataURI:i?(0,dn.NI)(a,i):a,source:"client"===e?"ssr-client":"ssr-server",orientation:1}}catch(t){var o="server"===e?"ssr-server-uri":"ssr-client-uri";throw new Tt.LD(o,t)}}(n,r,e.id,t.getImageURLParams(e),t.getMediaBlobUrlAttrs(e))}catch(e){}})),(0,f.Z)((0,l.Z)(t),"resolvePreview",function(){var e=(0,o.Z)(a().mark((function e(n,r){var i,o,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,i=t.getCardPreviewParams(n,r),e.next=4,Mn(i);case 4:o=e.sent,t.safeSetState({cardPreview:o}),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(0),c=(0,Tt.CV)("preview-fetch",e.t0),(0,Tt.oH)(c)?t.safeSetState({isBannedLocalPreview:!0}):t.safeSetState({status:"error",error:c});case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t,n){return e.apply(this,arguments)}}()),(0,f.Z)((0,l.Z)(t),"getPerformanceAttributes",(function(){var e=(0,l.Z)(t).timeElapsedTillCommenced,n=performance.now();return{overall:{durationSincePageStart:n,durationSinceCommenced:e&&n-e}}})),(0,f.Z)((0,l.Z)(t),"onImageError",(function(){var e=t.state.cardPreview,n=new Tt.gK(null==e?void 0:e.source),r=e&&["local","cache-local"].includes(e.source),i=e&&Dn(e);if(r||i){var a={cardPreview:void 0};r&&(a.isBannedLocalPreview=!0,t.fireLocalPreviewErrorEvent(n));var o=t.props,c=o.identifier,s=o.dimensions,l=void 0===s?{}:s;(0,E.J3)(c)&&jn(c.id,l),t.safeSetState(a)}else t.safeSetState({status:"error",error:n})})),(0,f.Z)((0,l.Z)(t),"onImageLoad",(function(){t.safeSetState({previewDidRender:!0})})),(0,f.Z)((0,l.Z)(t),"fireCopiedEvent",(function(){var e=t.props.createAnalyticsEvent,n=t.state.cardRef;n&&e&&function(e,t,n){if("function"==typeof window.getSelection){var r,i=window.getSelection();null!=i&&null!==(r=i.containsNode)&&void 0!==r&&r.call(i,n,!0)&&(0,M.LO)((0,M.Jn)(t),e)}}(e,t.metadata.id,n)})),(0,f.Z)((0,l.Z)(t),"fireScreenEvent",(function(){var e=t.props.createAnalyticsEvent;e&&function(e,t){(0,M.LO)((0,M.De)(t),e)}(e,t.fileAttributes)})),(0,f.Z)((0,l.Z)(t),"fireLocalPreviewErrorEvent",(function(e){})),(0,f.Z)((0,l.Z)(t),"safeSetState",(function(e){if(t.hasBeenMounted){var n=e.status?(r=e,function(e){return t=e.status,["complete","error","failed-processing"].includes(t)&&"complete"!==r.status?e:Wn(Wn({},e),r);var t}):e;t.setState(n)}var r})),(0,f.Z)((0,l.Z)(t),"unsubscribe",(function(){t.subscription&&t.subscription.unsubscribe(),t.hasBeenMounted&&t.setState({isBannedLocalPreview:!1})})),(0,f.Z)((0,l.Z)(t),"onCardViewClick",(function(e,n){var r=t.props,i=r.identifier,a=r.useInlinePlayer,o=r.shouldOpenMediaViewer,c=t.state.cardPreview,s=(0,l.Z)(t).metadata;if(t.onClick(e,n),s){var u=s&&"video"===s.mediaType;if(a&&u&&c)t.setState({isPlayingFile:!0});else if(o){var d;d=(0,E.J3)(i)?{id:i.id,mediaItemType:"file",collectionName:i.collectionName,occurrenceKey:i.occurrenceKey}:{mediaItemType:"external-image",dataURI:i.dataURI,name:i.name},t.setState({mediaViewerSelectedItem:d})}}})),(0,f.Z)((0,l.Z)(t),"onInlinePlayerError",(function(){t.setState({isPlayingFile:!1})})),(0,f.Z)((0,l.Z)(t),"setRef",(function(e){e&&t.setState({cardRef:e})})),(0,f.Z)((0,l.Z)(t),"renderInlinePlayer",(function(){var e=t.props,n=e.identifier,r=e.mediaClient,i=e.dimensions,a=e.selected,o=e.testId,c=e.originalDimensions;return m.createElement(zn.pi,{mediaClient:r,dimensions:i,originalDimensions:c,identifier:n,onError:t.onInlinePlayerError,onClick:t.onClick,selected:a,ref:t.setRef,testId:o})})),(0,f.Z)((0,l.Z)(t),"onMediaViewerClose",(function(){t.setState({mediaViewerSelectedItem:void 0})})),(0,f.Z)((0,l.Z)(t),"onDisplayImage",(function(){var e,n=t.props.identifier;e=(0,E.J3)(n)?{fileId:n.id,isUserCollection:n.collectionName===P.a1}:{fileId:n.dataURI,isUserCollection:!1},x.h.emit("media-viewed",Hn({viewingLevel:"minimal"},e))})),(0,f.Z)((0,l.Z)(t),"renderMediaViewer",(function(){var e=t.state.mediaViewerSelectedItem,n=t.props,r=n.mediaClient,i=n.identifier,a=n.mediaViewerDataSource,o=n.contextId,c=n.featureFlags;if(e){var s=(0,E.J3)(i)&&i.collectionName||"",l=a||{list:[]};return v.createPortal(m.createElement(k.Z,{collectionName:s,dataSource:l,mediaClientConfig:r.config,selectedItem:e,onClose:t.onMediaViewerClose,contextId:o,featureFlags:c}),document.body)}})),(0,f.Z)((0,l.Z)(t),"renderCard",(function(){var e=t.props,n=e.identifier,r=e.isLazy,i=e.appearance,a=e.resizeMode,o=e.dimensions,c=e.selectable,s=e.selected,u=e.disableOverlay,d=e.alt,p=e.testId,f=e.featureFlags,v=e.titleBoxBgColor,h=e.titleBoxIcon,g=e.ssr,y=n.mediaItemType,b=t.state,w=b.status,Z=b.progress,E=b.cardPreview,P=(E=void 0===E?{dataURI:void 0,orientation:1}:E).dataURI,x=E.orientation,k=b.error,I=b.cardRef,O=b.isCardVisible,S=(0,l.Z)(t).metadata,B=(0,l.Z)(t),R=B.onCardViewClick,C=B.onDisplayImage,L=B.actions,j=B.onMouseEnter,T=r&&!O,U=!!g,M=m.createElement(Ft,{status:w,error:k,mediaItemType:y,metadata:S,dataURI:P,alt:d,appearance:i,resizeMode:a,dimensions:o,actions:L,selectable:c,selected:s,onClick:R,onMouseEnter:j,disableOverlay:u,progress:Z,onDisplayImage:C,previewOrientation:x,innerRef:t.setRef,testId:p,featureFlags:f,titleBoxBgColor:v,titleBoxIcon:h,onImageError:t.onImageError,onImageLoad:t.onImageLoad,nativeLazyLoad:T,forceSyncDisplay:U});return r?m.createElement(sn,{targetRef:I,onVisible:t.onCardInViewport},M):M})),(0,f.Z)((0,l.Z)(t),"onCardInViewport",(function(){t.setState({isCardVisible:!0})})),(0,f.Z)((0,l.Z)(t),"onClick",(function(e,n){var r=t.props.onClick,i=(0,l.Z)(t).metadata;r&&r({event:e,mediaItemDetails:i},n)})),(0,f.Z)((0,l.Z)(t),"onMouseEnter",(function(e){var n=t.props.onMouseEnter,r=(0,l.Z)(t).metadata;n&&n({event:e,mediaItemDetails:r})}));var n,r="loading",s=t.props,u=s.identifier,d=s.dimensions,p=void 0===d?{}:d,g=s.ssr;if((0,E.J3)(u)){var y=u.id;!(n=Ln(y,p))&&g&&(t.fireCommencedEvent(),n=t.resolveSSRPreview(u,g))}else(0,E.Yk)(u)&&(t.fireCommencedEvent(),r="loading-preview",n={dataURI:u.dataURI,orientation:1,source:"external"});var b,I=!t.props.isLazy||!!n&&!(Dn(b=n)||function(e){return["ssr-server","cache-ssr-server"].includes(e.source)}(b));return t.state={status:r,isCardVisible:I,isPlayingFile:!1,cardPreview:n,cardRef:null,isBannedLocalPreview:!1,previewDidRender:!1},t}return(0,s.Z)(h,[{key:"componentDidMount",value:function(){this.hasBeenMounted=!0;var e=this.state,t=e.isCardVisible,n=e.cardPreview,r=this.props,i=r.identifier,a=r.ssr;t&&(0,E.J3)(i)&&this.updateStateForIdentifier(i),t&&a&&n&&Dn(n)&&(0,E.J3)(i)&&this.setCacheSSRPreview(i),Vn().addEventListener("copy",this.fireCopiedEvent)}},{key:"componentDidUpdate",value:function(e,t){var n=e.mediaClient,r=e.identifier,i=e.dimensions,a=t.isCardVisible,o=this.props,c=o.mediaClient,s=o.identifier,l=o.dimensions,u=o.featureFlags,d=this.state,p=d.isCardVisible,f=d.cardPreview,m=d.status,v=d.fileState,h=d.isBannedLocalPreview,g=d.previewDidRender,y=(0,E.ch)(r,s),b=!a&&p,w=n!==c;if((0,E.Yk)(s)&&y){this.fireCommencedEvent();var Z=s.dataURI;this.setState({status:"loading-preview",cardPreview:{dataURI:Z,orientation:1,source:"external"},isCardVisible:!0})}(0,E.J3)(s)&&(b||this.subscription&&(w||y))&&this.updateStateForIdentifier(s),this.state.status!==t.status&&(this.fireOperationalEvent(),("complete"===this.state.status||"video"===this.fileAttributes.fileMediatype&&f&&"processing"===this.state.status)&&this.fireScreenEvent()),(0,E.J3)(s)&&v&&function(e){var t=e.status,n=e.fileState,r=e.dimensions,i=e.prevDimensions,a=e.hasCardPreview,o=e.isBannedLocalPreview,c=e.featureFlags,s=function(e,t){var n=t.isPreviewable,r=t.hasPreview,i=t.isSupportedByBrowser;return r&&n&&("complete"===e||"loading-preview"===e||"uploading"===e||"processing"===e&&i)}(t,Bn(n,o,c)),l=function(e,t){if(e&&t&&On(e.width,t.width)&&On(e.height,t.height)){var n=parseInt("".concat(e.width),10)<parseInt("".concat(t.width),10),r=parseInt("".concat(e.height),10)<parseInt("".concat(t.height),10);return n||r}return!1}(i,r);return s&&(!a||l)}({status:m,fileState:v,dimensions:l,prevDimensions:i,featureFlags:u,hasCardPreview:!!f,isBannedLocalPreview:h})&&this.resolvePreview(s,v),b&&this.props.ssr&&f&&Dn(f)&&(0,E.J3)(s)&&this.setCacheSSRPreview(s),g&&["loading-preview","processing"].includes(m)&&(this.safeSetState({status:"complete"}),this.unsubscribe())}},{key:"componentWillUnmount",value:function(){this.hasBeenMounted=!1,this.unsubscribe(),Vn().removeEventListener("copy",this.fireCopiedEvent)}},{key:"updateStateForIdentifier",value:function(e){this.fireCommencedEvent(),this.subscribeInternalFile(e)}},{key:"subscribeInternalFile",value:function(e){var t=this,n=this.props.mediaClient,r=this.state.isBannedLocalPreview,i=e.id,a=e.collectionName,o=e.occurrenceKey;this.unsubscribe(),this.subscription=n.file.getFileState(i,{collectionName:a,occurrenceKey:o}).subscribe({next:function(e){var n=t.props.featureFlags,i=function(e,t,n){var r=function(e,t){var n=t.hasFilesize,r=t.isPreviewable,i=t.hasPreview;switch(e){case"uploading":case"failed-processing":case"error":return e;case"processing":return n?r?"processing":"complete":"processing";case"processed":return r&&i?"loading-preview":"complete";default:return"loading"}}(e.status,Bn(e,t,n)),i="error"===r&&(0,Z.f6)(e)?new Tt.Rq("error-file-state",new Error(e.message)):void 0;return{fileState:e,status:r,progress:"uploading"===r&&"uploading"===e.status?e.progress:1,error:i}}(e,r,n);t.safeSetState(i)},error:function(e){var n="uploading"===t.state.status?"upload":"metadata-fetch",r=new Tt.Rq(n,e);t.safeSetState({error:r,status:"error"})}})}},{key:"requestedDimensions",get:function(){var e,t=this.props.dimensions,n=(this.state||{}).cardRef;return{width:un("width",e={dimensions:t,element:n}),height:un("height",e)}}},{key:"metadata",get:function(){var e;return An(this.props.identifier,null===(e=this.state)||void 0===e?void 0:e.fileState)}},{key:"fileAttributes",get:function(){var e,t;return(0,M.A7)(this.metadata,null===(e=this.state)||void 0===e||null===(t=e.fileState)||void 0===t?void 0:t.status)}},{key:"fireOperationalEvent",value:function(){var e=this.state,t=e.status,n=e.error,r=this.props.createAnalyticsEvent;r&&function(e,t,n,r,i){var a=function(t){return(0,M.LO)(t,e)};switch(t){case"complete":a((0,M.dl)(n,r));break;case"failed-processing":a((0,M.Iw)(n,r));break;case"error":i&&a((0,M.rw)(n,r,i))}}(r,t,this.fileAttributes,this.getPerformanceAttributes(),n)}},{key:"fireCommencedEvent",value:function(){this.timeElapsedTillCommenced=performance.now();var e=this.props.createAnalyticsEvent;e&&function(e,t,n){(0,M.LO)((0,M.DU)(t,n),e)}(e,this.fileAttributes,{overall:{durationSincePageStart:this.timeElapsedTillCommenced}})}},{key:"actions",get:function(){var e=this,t=this.props,n=t.actions,i=void 0===n?[]:n,a=t.identifier,o=t.shouldEnableDownloadButton,c=this.state.status,s=this.metadata;return(0,E.J3)(a)&&("failed-processing"===c||o)?[{label:"Download",icon:m.createElement(b.Z,{label:"Download"}),handler:function(){return e.props.mediaClient.file.downloadBinary(a.id,s.name,a.collectionName)}}].concat((0,r.Z)(i)):i}},{key:"render",value:function(){var e=this.state,t=e.isPlayingFile,n=e.mediaViewerSelectedItem,r=m.createElement(m.Fragment,null,t?this.renderInlinePlayer():this.renderCard(),n?this.renderMediaViewer():null);return this.props.intl?r:m.createElement(I.Z,{locale:"en"},r)}}]),h}(m.Component);(0,f.Z)(Xn,"defaultProps",{appearance:"auto",resizeMode:"crop",isLazy:!0,disableOverlay:!1,featureFlags:{}});var qn=(0,y.z)({packageVersion:h.i8,packageName:h.u2,componentName:"mediaCard",component:"mediaCard"},{filterFeatureFlags:["newCardExperience","captions"]})((0,g.Z)()((0,O.ZP)(Xn,{enforceContext:!1})))},27274:function(e,t){var n,r;void 0===(r="function"==typeof(n=function(){var e=/(auto|scroll)/,t=function(e,n){return null===e.parentNode?n:t(e.parentNode,n.concat([e]))},n=function(e,t){return getComputedStyle(e,null).getPropertyValue(t)},r=function(t){return e.test(function(e){return n(e,"overflow")+n(e,"overflow-y")+n(e,"overflow-x")}(t))};return function(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var n=t(e.parentNode,[]),i=0;i<n.length;i+=1)if(r(n[i]))return n[i];return document.scrollingElement||document.documentElement}}})?n.apply(t,[]):n)||(e.exports=r)}}]);
//# sourceMappingURL=926.dist-bundle.js.map